import{_ as t,r as l,o as i,c as p,a as s,b as c,e as a,d as n}from"./app.a667bd71.js";const d={},o=a(`<p>\u5B9E\u65F6\u5F20\u6587\u7CFB\u7EDF\u7684\u6027\u80FD\u5982\u4F55\uFF0C\u4E86\u89E3CPU\u3001\u5185\u5B58\u3001\u5B58\u50A8\u7684\u4F7F\u7528\u60C5\u51B5\u662F\u4E00\u4E2A\u8FD0\u7EF4\u5FC5\u5907\u7684\u6280\u80FD\uFF0C\u540C\u65F6\u4E5F\u662F\u50CF\u6211\u8FD9\u79CD\u5B85\u7537\u7684\u5173\u6CE8\u70B9\u3002\u5728Linux\u4E0B\u6709\u5927\u91CF\u7684\u5DE5\u5177\u53EF\u4EE5\u76D1\u63A7\u5230\u8FD9\u4E9B\u6570\u636E\u3002\u6B64\u6587\u8BB2\u4E00\u4E9B\u5E38\u89C1\u7684\u76D1\u63A7\u5DE5\u5177\u3002\u53E6\u5916\u5982\u679C\u6709\u7EBF\u7A0B\u7684\u76D1\u63A7\u5957\u4EF6\uFF0C\u76F4\u63A5\u4F7F\u7528\u7EBF\u7A0B\u7684\u76D1\u63A7\u5957\u4EF6\u5373\u53EF\u3002\u5F53\u7136\u4E5F\u53EF\u4EE5\u5BF9\u7167\u4E0B\u56FE\u5C06\u6240\u6709\u7684\u547D\u4EE4\u591A\u64B8\u4E00\u904D</p><p><img src="https://st.0opslab.com/img/blog/linux_perf_tools_full.png" alt="aratar"></p><p><img src="https://st.0opslab.com/img/blog/linux_observability_tools.png" alt=""></p><h4 id="sar" tabindex="-1"><a class="header-anchor" href="#sar" aria-hidden="true">#</a> sar</h4><p>sar\u547D\u4EE4\u662F\u4E00\u4E2A\u7CFB\u7EDF\u72B6\u6001\u5141\u8BB8\u7EDF\u8BA1\u5DE5\u5177\uFF0C\u5B83\u53EF\u4EE5\u5C06\u64CD\u4F5C\u7CFB\u7EDF\u72B6\u6001\u8BA1\u6570\u5668\u663E\u793A\u51FA\u6765\uFF0C\u5B83\u7684\u7279\u70B9\u662F\u53EF\u4EE5\u8FDE\u7EED\u7684\u5BF9\u7CFB\u7EDF\u53D6\u6837\uFF0C\u83B7\u5F97\u5927\u91CF\u7684\u53D6\u6837\u6570\u636E\uFF0C\u53D6\u6837\u6570\u636E\u548C\u5206\u6790\u7684\u7ED3\u679C\u90FD\u53EF\u4EE5\u5B58\u5165\u6587\u4EF6\uFF0C\u4F7F\u7528\u5B83\u65F6\u6D88\u8017\u7684\u7CFB\u7EDF\u5F88\u5C0F\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>usage: sar <span class="token punctuation">[</span>\u9009\u9879<span class="token punctuation">]</span> <span class="token punctuation">[</span>\u53C2\u6570<span class="token punctuation">]</span>
\u9009\u9879\uFF1A
  -A\uFF1A\u663E\u793A\u6240\u6709\u7684\u62A5\u544A\u4FE1\u606F\uFF1B
  -b\uFF1A\u663E\u793AI/O\u901F\u7387\uFF1B
  -B\uFF1A\u663E\u793A\u6362\u9875\u72B6\u6001\uFF1B
  -c\uFF1A\u663E\u793A\u8FDB\u7A0B\u521B\u5EFA\u6D3B\u52A8\uFF1B
  -d\uFF1A\u663E\u793A\u6BCF\u4E2A\u5757\u8BBE\u5907\u7684\u72B6\u6001\uFF1B
  -e\uFF1A\u8BBE\u7F6E\u663E\u793A\u62A5\u544A\u7684\u7ED3\u675F\u65F6\u95F4\uFF1B
  -f\uFF1A\u4ECE\u6307\u5B9A\u6587\u4EF6\u63D0\u53D6\u62A5\u544A\uFF1B
  -i\uFF1A\u8BBE\u72B6\u6001\u4FE1\u606F\u5237\u65B0\u7684\u95F4\u9694\u65F6\u95F4\uFF1B
  -P\uFF1A\u62A5\u544A\u6BCF\u4E2ACPU\u7684\u72B6\u6001\uFF1B
  -R\uFF1A\u663E\u793A\u5185\u5B58\u72B6\u6001\uFF1B
  -u\uFF1A\u663E\u793ACPU\u5229\u7528\u7387\uFF1B
  -v\uFF1A\u663E\u793A\u7D22\u5F15\u8282\u70B9\uFF0C\u6587\u4EF6\u548C\u5176\u4ED6\u5185\u6838\u8868\u7684\u72B6\u6001\uFF1B
  -w\uFF1A\u663E\u793A\u4EA4\u6362\u5206\u533A\u72B6\u6001\uFF1B
  -x\uFF1A\u663E\u793A\u7ED9\u5B9A\u8FDB\u7A0B\u7684\u72B6\u6001\u3002
\u53C2\u6570:
	\u95F4\u9694\u65F6\u95F4\uFF1A\u6BCF\u6B21\u62A5\u544A\u7684\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09\uFF1B
	\u6B21\u6570\uFF1A\u663E\u793A\u62A5\u544A\u7684\u6B21\u6570\u3002
\u5B9E\u4F8B:	
	<span class="token comment"># sar -r \u67E5\u770B\u5185\u5B58\u548C\u4EA4\u6362\u7A7A\u95F4\u7684\u4F7F\u7528\u7387</span>
	<span class="token comment"># sar -u 1 3 //\u6BCF\u96941\u79D2\u663E\u793A\u4E00\u6B21CPU\u4F7F\u7528\u4FE1\u606F\uFF0C\u603B\u5171\u663E\u793A3\u6B21</span>
    <span class="token comment">#sar 1 0 -u -e 11:02:00 &gt; /opt/cpu.log</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="iostat" tabindex="-1"><a class="header-anchor" href="#iostat" aria-hidden="true">#</a> iostat</h4><p>iostat\u547D\u4EE4\u88AB\u7528\u4E8E\u76D1\u89C6\u7CFB\u7EDF\u8F93\u5165\u8F93\u51FA\u548CCPU\u7684\u4F7F\u7528\u60C5\u51B5\u3002\u5B83\u7684\u7279\u70B9\u662F\u6C47\u62A5\u78C1\u76D8\u6D3B\u52A8\u7EDF\u8BA1\u60C5\u51B5\uFF0C\u540C\u65F6\u4E5F\u4F1A\u6C47\u62A5CPU\u4F7F\u7528\u60C5\u51B5\uFF0Ciostat\u53EA\u80FD\u5BF9\u67D0\u4E2A\u8FDB\u7A0B\u8FDB\u884C\u6DF1\u5165\u5206\u6790\uFF0C\u4EC5\u5BF9\u7CFB\u7EDF\u7684\u6574\u5929\u60C5\u51B5\u8FDB\u884C\u5206\u6790\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>usage: iostat <span class="token punctuation">[</span>\u9009\u9879<span class="token punctuation">]</span> <span class="token punctuation">[</span>\u53C2\u6570<span class="token punctuation">]</span>
\u9009\u9879:
  -c\uFF1A\u4EC5\u663E\u793ACPU\u4F7F\u7528\u60C5\u51B5\uFF1B
  -d\uFF1A\u4EC5\u663E\u793A\u8BBE\u5907\u5229\u7528\u7387\uFF1B
  -k\uFF1A\u663E\u793A\u72B6\u6001\u4EE5\u5343\u5B57\u8282\u6BCF\u79D2\u4E3A\u5355\u4F4D\uFF0C\u800C\u4E0D\u4F7F\u7528\u5757\u6BCF\u79D2\uFF1B
  -m\uFF1A\u663E\u793A\u72B6\u6001\u4EE5\u5146\u5B57\u8282\u6BCF\u79D2\u4E3A\u5355\u4F4D\uFF1B
  -p\uFF1A\u4EC5\u663E\u793A\u5757\u8BBE\u5907\u548C\u6240\u6709\u88AB\u4F7F\u7528\u7684\u5176\u4ED6\u5206\u533A\u7684\u72B6\u6001\uFF1B
  -t\uFF1A\u663E\u793A\u6BCF\u4E2A\u62A5\u544A\u4EA7\u751F\u65F6\u7684\u65F6\u95F4\uFF1B
  -V\uFF1A\u663E\u793A\u7248\u53F7\u5E76\u9000\u51FA\uFF1B
  -x\uFF1A\u663E\u793A\u6269\u5C55\u72B6\u6001\u3002
\u53C2\u6570:
	\u95F4\u9694\u65F6\u95F4\uFF1A\u6BCF\u6B21\u62A5\u544A\u7684\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09\uFF1B
	\u6B21\u6570\uFF1A\u663E\u793A\u62A5\u544A\u7684\u6B21\u6570\u3002
	
\u5B9E\u4F8B\uFF1A
<span class="token comment"># \u89C2\u5BDF\u67D0\u8BBE\u5907\u7684IO\u8BE6\u7EC6\u60C5\u51B5</span>
$ iostat <span class="token parameter variable">-x</span> /dev/disk/by-uuid/49f819fd-e56d-48a4-86d3-7ebe0a68ec88
Linux <span class="token number">3.10</span>.0-514.26.2.el7.x86_64 <span class="token punctuation">(</span>VM_0_14_centos<span class="token punctuation">)</span> 	<span class="token number">2018</span>\u5E7403\u670811\u65E5 	_x86_64_	<span class="token punctuation">(</span><span class="token number">2</span> CPU<span class="token punctuation">)</span>

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           <span class="token number">0.16</span>    <span class="token number">0.00</span>    <span class="token number">0.10</span>    <span class="token number">0.06</span>    <span class="token number">0.00</span>   <span class="token number">99.68</span>

Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
vda1              <span class="token number">0.00</span>     <span class="token number">1.05</span>    <span class="token number">0.00</span>    <span class="token number">1.96</span>     <span class="token number">0.08</span>    <span class="token number">12.47</span>    <span class="token number">12.76</span>     <span class="token number">0.06</span>   <span class="token number">29.70</span>    <span class="token number">2.31</span>   <span class="token number">29.77</span>   <span class="token number">1.37</span>   <span class="token number">0.27</span>
	
Device	\u76D1\u6D4B\u8BBE\u5907\u540D\u79F0
rrqm/s	\u6BCF\u79D2\u9700\u8981\u8BFB\u53D6\u9700\u6C42\u7684\u6570\u91CF
wrqm/s	\u6BCF\u79D2\u9700\u8981\u5199\u5165\u9700\u6C42\u7684\u6570\u91CF
r/s 	\u6BCF\u79D2\u5B9E\u9645\u8BFB\u53D6\u9700\u6C42\u7684\u6570\u91CF
w/s	\u6BCF\u79D2\u5B9E\u9645\u5199\u5165\u9700\u6C42\u7684\u6570\u91CF
rsec/s	\u6BCF\u79D2\u8BFB\u53D6\u533A\u6BB5\u7684\u6570\u91CF
wsec/s	\u6BCF\u79D2\u5199\u5165\u533A\u6BB5\u7684\u6570\u91CF
rkB/s	\u6BCF\u79D2\u5B9E\u9645\u8BFB\u53D6\u7684\u5927\u5C0F\uFF0C\u5355\u4F4D\u4E3AKB
wkB/s	\u6BCF\u79D2\u5B9E\u9645\u5199\u5165\u7684\u5927\u5C0F\uFF0C\u5355\u4F4D\u4E3AKB
avgrq-sz	\u9700\u6C42\u7684\u5E73\u5747\u5927\u5C0F\u533A\u6BB5
avgqu-sz	\u9700\u6C42\u7684\u5E73\u5747\u961F\u5217\u957F\u5EA6
await	\u7B49\u5F85I/O\u5E73\u5747\u7684\u65F6\u95F4\uFF08milliseconds\uFF09
svctm	I/O\u9700\u6C42\u5B8C\u6210\u7684\u5E73\u5747\u65F6\u95F4
%util	\u88ABI/O\u9700\u6C42\u6D88\u8017\u7684CPU\u767E\u5206\u6BD4

\u5907\u6CE8\uFF1A\u5982\u679C %util \u63A5\u8FD1 <span class="token number">100</span>%\uFF0C\u8BF4\u660E\u4EA7\u751F\u7684I/O\u8BF7\u6C42\u592A\u591A\uFF0CI/O\u7CFB\u7EDF\u5DF2\u7ECF\u6EE1\u8D1F\u8377\uFF0C\u8BE5\u78C1\u76D8\u53EF\u80FD\u5B58\u5728\u74F6\u9888\u3002
\u5982\u679C svctm \u6BD4\u8F83\u63A5\u8FD1 await\uFF0C\u8BF4\u660E I/O \u51E0\u4E4E\u6CA1\u6709\u7B49\u5F85\u65F6\u95F4\uFF1B\u5982\u679C await \u8FDC\u5927\u4E8E svctm\uFF0C\u8BF4\u660EI/O 
\u961F\u5217\u592A\u957F\uFF0Cio\u54CD\u5E94\u592A\u6162\uFF0C\u5219\u9700\u8981\u8FDB\u884C\u5FC5\u8981\u4F18\u5316\u3002\u5982\u679Cavgqu-sz\u6BD4\u8F83\u5927\uFF0C\u4E5F\u8868\u793A\u6709\u5F53\u91CFio\u5728\u7B49\u5F85\u3002

<span class="token comment"># \u663E\u793A\u6240\u6709\u8BBE\u5907\u7684\u8D1F\u8F7D\u60C5\u51B5</span>
$ iostat
Linux <span class="token number">3.10</span>.0-514.26.2.el7.x86_64 <span class="token punctuation">(</span>VM_0_14_centos<span class="token punctuation">)</span> 	<span class="token number">2018</span>\u5E7403\u670811\u65E5 	_x86_64_	<span class="token punctuation">(</span><span class="token number">2</span> CPU<span class="token punctuation">)</span>

<span class="token comment"># cpu\u5C5E\u6027</span>
avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           <span class="token number">0.16</span>    <span class="token number">0.00</span>    <span class="token number">0.10</span>    <span class="token number">0.06</span>    <span class="token number">0.00</span>   <span class="token number">99.68</span>
<span class="token comment"># \u78C1\u76D8IO\u60C5\u51B5</span>
<span class="token comment"># tps\uFF1A\u8BE5\u8BBE\u5907\u6BCF\u79D2\u7684\u4F20\u8F93\u6B21\u6570\u3002\u201C\u4E00\u6B21\u4F20\u8F93\u201D\u610F\u601D\u662F\u201C\u4E00\u6B21I/O\u8BF7\u6C42\u201D\u3002\u591A\u4E2A\u903B\u8F91\u8BF7\u6C42\u53EF\u80FD\u4F1A\u88AB\u5408\u5E76\u4E3A\u201C\u4E00\u6B21I/O\u8BF7\u6C42\u201D\u3002</span>
<span class="token comment"># kB_read/s\uFF1A\u6BCF\u79D2\u4ECE\u8BBE\u5907\uFF08drive expressed\uFF09\u8BFB\u53D6\u7684\u6570\u636E\u91CF\uFF1B</span>
<span class="token comment"># kB_wrtn/s\uFF1A\u6BCF\u79D2\u5411\u8BBE\u5907\uFF08drive expressed\uFF09\u5199\u5165\u7684\u6570\u636E\u91CF\uFF1B</span>
<span class="token comment"># kB_read\uFF1A\u8BFB\u53D6\u7684\u603B\u6570\u636E\u91CF\uFF1BkB_wrtn\uFF1A\u5199\u5165\u7684\u603B\u6570\u91CF\u6570\u636E\u91CF\uFF1B</span>
Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn
vda               <span class="token number">1.97</span>         <span class="token number">0.09</span>        <span class="token number">12.47</span>     <span class="token number">569937</span>   <span class="token number">83619604</span>

<span class="token comment"># \u67E5\u770B\u8BBE\u5907\u4F7F\u7528\u7387\u548C\u54CD\u5E94\u65F6\u95F4</span>
$ iostat <span class="token parameter variable">-d</span> <span class="token parameter variable">-x</span> <span class="token parameter variable">-k</span> <span class="token number">1</span> <span class="token number">2</span>
Linux <span class="token number">3.10</span>.0-514.26.2.el7.x86_64 <span class="token punctuation">(</span>VM_0_14_centos<span class="token punctuation">)</span> 	<span class="token number">2018</span>\u5E7403\u670811\u65E5 	_x86_64_	<span class="token punctuation">(</span><span class="token number">2</span> CPU<span class="token punctuation">)</span>

Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
vda               <span class="token number">0.00</span>     <span class="token number">1.05</span>    <span class="token number">0.00</span>    <span class="token number">1.97</span>     <span class="token number">0.08</span>    <span class="token number">12.47</span>    <span class="token number">12.74</span>     <span class="token number">0.06</span>   <span class="token number">29.64</span>    <span class="token number">2.30</span>   <span class="token number">29.71</span>   <span class="token number">1.37</span>   <span class="token number">0.27</span>

rrqm/s\uFF1A \u6BCF\u79D2\u8FDB\u884C merge \u7684\u8BFB\u64CD\u4F5C\u6570\u76EE.\u5373 delta<span class="token punctuation">(</span>rmerge<span class="token punctuation">)</span>/s
wrqm/s\uFF1A \u6BCF\u79D2\u8FDB\u884C merge \u7684\u5199\u64CD\u4F5C\u6570\u76EE.\u5373 delta<span class="token punctuation">(</span>wmerge<span class="token punctuation">)</span>/s
r/s\uFF1A \u6BCF\u79D2\u5B8C\u6210\u7684\u8BFB I/O \u8BBE\u5907\u6B21\u6570.\u5373 delta<span class="token punctuation">(</span>rio<span class="token punctuation">)</span>/s
w/s\uFF1A \u6BCF\u79D2\u5B8C\u6210\u7684\u5199 I/O \u8BBE\u5907\u6B21\u6570.\u5373 delta<span class="token punctuation">(</span>wio<span class="token punctuation">)</span>/s
rsec/s\uFF1A \u6BCF\u79D2\u8BFB\u6247\u533A\u6570.\u5373 delta<span class="token punctuation">(</span>rsect<span class="token punctuation">)</span>/s
wsec/s\uFF1A \u6BCF\u79D2\u5199\u6247\u533A\u6570.\u5373 delta<span class="token punctuation">(</span>wsect<span class="token punctuation">)</span>/s
rkB/s\uFF1A \u6BCF\u79D2\u8BFBK\u5B57\u8282\u6570.\u662F rsect/s \u7684\u4E00\u534A,\u56E0\u4E3A\u6BCF\u6247\u533A\u5927\u5C0F\u4E3A512\u5B57\u8282.<span class="token punctuation">(</span>\u9700\u8981\u8BA1\u7B97<span class="token punctuation">)</span>
wkB/s\uFF1A \u6BCF\u79D2\u5199K\u5B57\u8282\u6570.\u662F wsect/s \u7684\u4E00\u534A.<span class="token punctuation">(</span>\u9700\u8981\u8BA1\u7B97<span class="token punctuation">)</span>
avgrq-sz\uFF1A\u5E73\u5747\u6BCF\u6B21\u8BBE\u5907I/O\u64CD\u4F5C\u7684\u6570\u636E\u5927\u5C0F <span class="token punctuation">(</span>\u6247\u533A<span class="token punctuation">)</span>.delta<span class="token punctuation">(</span>rsect+wsect<span class="token punctuation">)</span>/delta<span class="token punctuation">(</span>rio+wio<span class="token punctuation">)</span>
avgqu-sz\uFF1A\u5E73\u5747I/O\u961F\u5217\u957F\u5EA6.\u5373 delta<span class="token punctuation">(</span>aveq<span class="token punctuation">)</span>/s/1000 <span class="token punctuation">(</span>\u56E0\u4E3Aaveq\u7684\u5355\u4F4D\u4E3A\u6BEB\u79D2<span class="token punctuation">)</span>.
await\uFF1A \u5E73\u5747\u6BCF\u6B21\u8BBE\u5907I/O\u64CD\u4F5C\u7684\u7B49\u5F85\u65F6\u95F4 <span class="token punctuation">(</span>\u6BEB\u79D2<span class="token punctuation">)</span>.\u5373 delta<span class="token punctuation">(</span>ruse+wuse<span class="token punctuation">)</span>/delta<span class="token punctuation">(</span>rio+wio<span class="token punctuation">)</span>
svctm\uFF1A \u5E73\u5747\u6BCF\u6B21\u8BBE\u5907I/O\u64CD\u4F5C\u7684\u670D\u52A1\u65F6\u95F4 <span class="token punctuation">(</span>\u6BEB\u79D2<span class="token punctuation">)</span>.\u5373 delta<span class="token punctuation">(</span>use<span class="token punctuation">)</span>/delta<span class="token punctuation">(</span>rio+wio<span class="token punctuation">)</span>
%util\uFF1A \u4E00\u79D2\u4E2D\u6709\u767E\u5206\u4E4B\u591A\u5C11\u7684\u65F6\u95F4\u7528\u4E8E I/O \u64CD\u4F5C,\u6216\u8005\u8BF4\u4E00\u79D2\u4E2D\u6709\u591A\u5C11\u65F6\u95F4 I/O \u961F\u5217\u662F\u975E\u7A7A\u7684\uFF0C\u5373 delta<span class="token punctuation">(</span>use<span class="token punctuation">)</span>/s/1000 <span class="token punctuation">(</span>\u56E0\u4E3Ause\u7684\u5355\u4F4D\u4E3A\u6BEB\u79D2<span class="token punctuation">)</span>

%util \u63A5\u8FD1 <span class="token number">100</span>%\uFF0C\u8BF4\u660E\u4EA7\u751F\u7684I/O\u8BF7\u6C42\u592A\u591A\uFF0CI/O\u7CFB\u7EDF\u5DF2\u7ECF\u6EE1\u8D1F\u8377\uFF0C\u8BE5\u78C1\u76D8\u53EF\u80FD\u5B58\u5728\u74F6\u9888\u3002 
idle\u5C0F\u4E8E70% IO\u538B\u529B\u5C31\u8F83\u5927\u4E86
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="vmstat" tabindex="-1"><a class="header-anchor" href="#vmstat" aria-hidden="true">#</a> vmstat</h4><p>vmstat\u662F\u865A\u62DF\u5185\u5B58\u7EDF\u8BA1\u7684\u7F29\u5199\uFF0C\u53EF\u5B9E\u65F6\u76D1\u63A7\u64CD\u4F5C\u7CFB\u7EDF\u7684\u865A\u62DF\u5185\u5B58\u3001\u8FDB\u7A0B\u3001CPU\u6D3B\u52A8\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>usage: <span class="token function">vmstat</span> <span class="token punctuation">[</span>\u9009\u9879<span class="token punctuation">]</span> <span class="token punctuation">[</span>\u53C2\u6570<span class="token punctuation">]</span>
\u9009\u9879:
  -a\uFF1A\u663E\u793A\u6D3B\u52A8\u5185\u9875\uFF1B
  -f\uFF1A\u663E\u793A\u542F\u52A8\u540E\u521B\u5EFA\u7684\u8FDB\u7A0B\u603B\u6570\uFF1B
  -m\uFF1A\u663E\u793Aslab\u4FE1\u606F\uFF1B
  -n\uFF1A\u5934\u4FE1\u606F\u4EC5\u663E\u793A\u4E00\u6B21\uFF1B
  -s\uFF1A\u4EE5\u8868\u683C\u65B9\u5F0F\u663E\u793A\u4E8B\u4EF6\u8BA1\u6570\u5668\u548C\u5185\u5B58\u72B6\u6001\uFF1B
  -d\uFF1A\u62A5\u544A\u78C1\u76D8\u72B6\u6001\uFF1B
  -p\uFF1A\u663E\u793A\u6307\u5B9A\u7684\u786C\u76D8\u5206\u533A\u72B6\u6001\uFF1B
  -S\uFF1A\u8F93\u51FA\u4FE1\u606F\u7684\u5355\u4F4D\u3002
\u53C2\u6570:
	\u4E8B\u4EF6\u95F4\u9694\uFF1A\u72B6\u6001\u4FE1\u606F\u5237\u65B0\u7684\u65F6\u95F4\u95F4\u9694\uFF1B
	\u6B21\u6570\uFF1A\u663E\u793A\u62A5\u544A\u7684\u6B21\u6570\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0B\u9762\u662F\u4E00\u4E9B\u5B9E\u4F8B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u9ED8\u8BA4\u7528\u6CD5</span>
$ <span class="token function">vmstat</span>
<span class="token comment"># Procs \u8FDB\u7A0B\u4FE1\u606F </span>
<span class="token comment"># 	r \u8FD0\u884C\u961F\u5217\u4E2D\u8FDB\u7A0B\u7684\u6570\u91CF\uFF0C\u8FD9\u4E2A\u503C\u4E5F\u53EF\u4EE5\u5224\u65AD\u662F\u5426\u589E\u52A0CPU\uFF0C\u957F\u671F\u5927\u4E8E1</span>
<span class="token comment">#	b \u7B49\u5F85IO\u8FDB\u7A0B\u7684\u6570\u91CF</span>
<span class="token comment"># Memory \u5185\u5B58\u4FE1\u606F</span>
<span class="token comment">#	swpd \u4F7F\u7528\u865A\u62DF\u5185\u5B58\u5927\u5C0F</span>
<span class="token comment">#	free \u7A7A\u95F2\u5185\u5B58\u5927\u5C0F</span>
<span class="token comment">#	buff \u4F5C\u7528\u7F13\u51B2\u7684\u5185\u5B58\u5927\u5C0F</span>
<span class="token comment"># 	cache \u7528\u4F5C\u7F13\u5B58\u7684\u5185\u5B58\u5927\u5C0F</span>
<span class="token comment"># Swap(\u8FD9\u4FE9\u4E2A\u503C\u957F\u671F\u5927\u4E8E0\u53EF\u80FD\u4F1A\u8425\u9500\u7684\u6027\u80FD)</span>
<span class="token comment">#	si \u6BCF\u79D2\u4ECE\u4EA4\u6362\u53BB\u5230\u5185\u5B58\u7684\u5927\u5C0F\uFF0C\u7531\u78C1\u76D8\u8C03\u5165\u5185\u5B58</span>
<span class="token comment">#	so \u6BCF\u79D2\u5199\u5165\u4EA4\u6362\u533A\u7684\u5185\u5B58\u5927\u5C0F\uFF0C\u6709\u5185\u5B58\u8C03\u5165\u78C1\u76D8</span>
<span class="token comment"># IO(\u5927\u5C0F\u4E3AKB,\u8FD9\u4FE9\u4E2A\u503C\u8D8A\u5927CPU\u5728\u7B49\u5F85IO\u7684\u65F6\u95F4\u4F1A\u8D8A\u5927)</span>
<span class="token comment"># 	bi	\u6BCF\u79D2\u8BFB\u53D6\u7684\u5757\u6570</span>
<span class="token comment">#	bo	\u6BCF\u79D2\u5199\u5165\u7684\u5757\u6570</span>
<span class="token comment"># system(\u8FD9\u4FE9\u4E2A\u503C\u8D8A\u5927\uFF0C\u7CFB\u7EDF\u5185\u6838\u6D88\u8017CPU\u7684\u65F6\u95F4\u8D8A\u5927) </span>
<span class="token comment">#	in	\u6BCF\u79D2\u4E2D\u65AD\u6570\uFF0C\u5305\u62EC\u65F6\u949F\u4E2D\u65AD</span>
<span class="token comment">#	cs	\u6BCF\u79D2\u4E0A\u4E0B\u6587\u5207\u6362\u6570</span>
<span class="token comment"># CPU(cpu\u767E\u5206\u6BD4)</span>
<span class="token comment">#	us \u7528\u6237\u8FDB\u7A0B\u6267\u884C\u65F6\u95F4\u767E\u5206\u6BD4</span>
<span class="token comment">#	sy \u5185\u6838\u7CFB\u7EDF\u8FDB\u7A0B\u6267\u884C\u65F6\u95F4\u767E\u5206\u6BD4</span>
<span class="token comment">#	wa IO\u7B49\u5F85\u65F6\u95F4\u767E\u5206\u6BD4</span>
<span class="token comment">#	id \u7A7A\u95F2\u65F6\u95F4\u767E\u5206\u6BD4</span>
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   <span class="token function">free</span>   buff  cache   si   so    bi    bo   <span class="token keyword">in</span>   cs us sy <span class="token function">id</span> wa st
 <span class="token number">1</span>  <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">200244</span> <span class="token number">261000</span> <span class="token number">3250708</span>    <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>     <span class="token number">6</span>    <span class="token number">0</span>    <span class="token number">2</span>  <span class="token number">0</span>  <span class="token number">0</span> <span class="token number">100</span>  <span class="token number">0</span>  <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="free" tabindex="-1"><a class="header-anchor" href="#free" aria-hidden="true">#</a> free</h4><p>free\u547D\u4EE4\u53EF\u4EE5\u663E\u793A\u5F53\u524D\u7CFB\u7EDF\u672A\u4F7F\u7528\u7684\u5DF2\u4F7F\u7528\u7684\u5185\u5B58\u6570\u636E\uFF0C\u8FD8\u53EF\u4EE5\u663E\u793A\u88AB\u5185\u6838\u4F7F\u7528\u7684\u5185\u5B58\u7F13\u51B2\u533A\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>usage: <span class="token function">free</span> <span class="token punctuation">[</span>\u9009\u9879<span class="token punctuation">]</span>
\u9009\u9879:
    -b\uFF1A\u4EE5Byte\u4E3A\u5355\u4F4D\u663E\u793A\u5185\u5B58\u4F7F\u7528\u60C5\u51B5\uFF1B
    -k\uFF1A\u4EE5KB\u4E3A\u5355\u4F4D\u663E\u793A\u5185\u5B58\u4F7F\u7528\u60C5\u51B5\uFF1B
    -m\uFF1A\u4EE5MB\u4E3A\u5355\u4F4D\u663E\u793A\u5185\u5B58\u4F7F\u7528\u60C5\u51B5\uFF1B
    -o\uFF1A\u4E0D\u663E\u793A\u7F13\u51B2\u533A\u8C03\u8282\u5217\uFF1B
    -s<span class="token operator">&lt;</span>\u95F4\u9694\u79D2\u6570<span class="token operator">&gt;</span>\uFF1A\u6301\u7EED\u89C2\u5BDF\u5185\u5B58\u4F7F\u7528\u72B6\u51B5\uFF1B
    -t\uFF1A\u663E\u793A\u5185\u5B58\u603B\u548C\u5217\uFF1B
    -V\uFF1A\u663E\u793A\u7248\u672C\u4FE1\u606F\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9E\u4F8B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">free</span> <span class="token parameter variable">-m</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:           <span class="token number">3791</span>         <span class="token number">156</span>         <span class="token number">204</span>           <span class="token number">0</span>        <span class="token number">3429</span>        <span class="token number">3336</span>
Swap:             <span class="token number">0</span>           <span class="token number">0</span>           <span class="token number">0</span>

total\uFF1A\u5185\u5B58\u603B\u6570\uFF1B
used\uFF1A\u5DF2\u7ECF\u4F7F\u7528\u7684\u5185\u5B58\u6570\uFF1B
free\uFF1A\u7A7A\u95F2\u7684\u5185\u5B58\u6570\uFF1B
shared\uFF1A\u5F53\u524D\u5DF2\u7ECF\u5E9F\u5F03\u4E0D\u7528\uFF1B
buffers Buffer\uFF1A\u7F13\u5B58\u5185\u5B58\u6570\uFF1B
cached Page\uFF1A\u7F13\u5B58\u5185\u5B58\u6570\u3002

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="dstat" tabindex="-1"><a class="header-anchor" href="#dstat" aria-hidden="true">#</a> dstat</h4><p>dstat\u662F\u4E00\u4E2A\u53EF\u4EE5\u53D6\u4EE3vmstat\u3001iostat\u3001netstat\u548Cifstat\u8FD9\u4E9B\u547D\u4EE4\u7684\u591A\u529F\u80FD\u4EA7\u54C1\uFF0C\u540C\u65F6\u4E5F\u5BA2\u670D\u4E86\u8FD9\u4E9B\u547D\u4EE4\u7684\u5C40\u9650\u6027\u5E76\u589E\u52A0\u4E86\u4E00\u4E9B\u529F\u80FD\uFF0Cdstat\u53EF\u4EE5\u5F88\u65B9\u4FBF\u76D1\u63A7\u7CFB\u7EDF\u8FD0\u884C\u72B6\u6001\u5E76\u7528\u6237\u68C0\u6D4B\u57FA\u51C6\u548C\u6392\u9664\u6545\u969C\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>usage: dstat <span class="token punctuation">[</span>-afv<span class="token punctuation">]</span> <span class="token punctuation">[</span>optins<span class="token punctuation">..</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>delay <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u547D\u4EE4\u9009\u9879</p>`,23),r=s("thead",null,[s("tr",null,[s("th",null,"-c, - -cpu"),s("th",null,"\u5F00\u542Fcpu\u7EDF\u8BA1")])],-1),u=s("tr",null,[s("td",null,"-C"),s("td",null,"\u8BE5\u9009\u9879\u8DDFcpu\u7684\u7F16\u53F7\uFF080~cpu\u6838\u6570-1,\u591A\u4E2A\u7528\u90FD\u597D\u9694\u5F00\uFF09\u5982\uFF1A0,3,total\u8868\u793A\u5206\u522B\u5305\u542Bcpu0\u3001cpu3\u548Ctotal")],-1),m=s("tr",null,[s("td",null,"-d, - -disk"),s("td",null,"\u5F00\u542Fdisk\u7EDF\u8BA1")],-1),v=s("tr",null,[s("td",null,"-D"),s("td",null,"\u6539\u9009\u8DDF\u5177\u4F53\u7684\u8BBE\u5907\u540D\uFF08\u591A\u4E2A\u7528\u9017\u53F7\u9694\u5F00\uFF09\u5982\uFF1Atotal,hda\uFF0Chdb\u8868\u793A\u5206\u522B\u7EDF\u8BA1total\u3001hda\u3001hdb\u8BBE\u5907\u5757")],-1),b=s("tr",null,[s("td",null,"-g, - -page"),s("td",null,"\u5F00\u542F\u5206\u9875\u7EDF\u8BA1")],-1),k=s("tr",null,[s("td",null,"-i, - -int"),s("td",null,"\u5F00\u542F\u4E2D\u65AD\u7EDF\u8BA1")],-1),h=s("tr",null,[s("td",null,"-I 5,10"),s("td",null,"\u5F00\u542F\u8D1F\u8F7D\u7EDF\u8BA1\u91CF")],-1),_=s("tr",null,[s("td",null,"-l, - -load"),s("td",null,"\u5F00\u542F\u8D1F\u8F7D\u5747\u8861\u7EDF\u8BA1\uFF0C\u5206\u522B\u662F1m\uFF0C5m\uFF0C15m")],-1),g=s("tr",null,[s("td",null,"-m, - -mem"),s("td",null,"\u5F00\u542F\u5185\u5B58\u7EDF\u8BA1\uFF0C\u5305\u62ECused\uFF0Cbuffers\uFF0Ccache\uFF0Cfree")],-1),f=s("tr",null,[s("td",null,"-n, - -net"),s("td",null,"\u5F00\u542Fnet\u7EDF\u8BA1\uFF0C\u5305\u62EC\u63A5\u53D7\u548C\u53D1\u9001")],-1),w=s("tr",null,[s("td",null,"-N"),s("td",null,"\u8BE5\u9009\u9879\u53EF\u4EE5\u8DDF\u7F51\u7EDC\u8BBE\u5907\u540D\u591A\u4E2A\u7528\u9017\u53F7\u9694\u5F00\uFF0C\u5982eth1,total")],-1),y=s("tr",null,[s("td",null,"-p, - -proc"),s("td",null,"\u5F00\u542F\u8FDB\u7A0B\u7EDF\u8BA1\uFF0C\u5305\u62ECrunnable, uninterruptible, new")],-1),x=s("tr",null,[s("td",null,"-r, - -io"),s("td",null,"io\u5F00\u542F\u8BF7\u6C42\u7EDF\u8BA1\uFF0C\u5305\u62ECread requests, write requests")],-1),I=s("tr",null,[s("td",null,"-s, - -swap"),s("td",null,"\u5F00\u542Fswap\u7EDF\u8BA1\uFF0C\u5305\u62ECused, free")],-1),P=s("tr",null,[s("td",null,"-S"),s("td",null,"\u8BE5\u9009\u9879\u53EF\u4EE5\u8DDF\u5177\u4F53\u7684\u4EA4\u6362\u533A\uFF0C\u591A\u4E2A\u7528\u9017\u53F7\u9694\u5F00\u5982swap1,total")],-1),$=s("tr",null,[s("td",null,"-t, - -time"),s("td",null,"\u542F\u7528\u65F6\u95F4\u548C\u65E5\u671F\u8F93\u51FA")],-1),O=s("tr",null,[s("td",null,"-T, - -epoch"),s("td",null,"\u542F\u7528\u65F6\u95F4\u8BA1\u6570\uFF0C\u4ECEepoch\u5230\u73B0\u5728\u7684\u79D2\u6570")],-1),q=s("tr",null,[s("td",null,"-y, - -sys"),s("td",null,"\u5F00\u542F\u7CFB\u7EDF\u7EDF\u8BA1\uFF0C\u5305\u62EC\u4E2D\u65AD\u548C\u4E0A\u4E0B\u6587\u5207\u6362")],-1),C=s("tr",null,[s("td",null,"- -aio"),s("td",null,"\u5F00\u542F\u540C\u6B65IO\u7EDF\u8BA1 (asynchronous I/O)")],-1),B=s("tr",null,[s("td",null,"- -fs"),s("td",null,"\u5F00\u542F\u6587\u4EF6\u7CFB\u7EDF\u7EDF\u8BA1\uFF0C\u5305\u62EC (open files, inodes)")],-1),S=s("tr",null,[s("td",null,"- -ipc"),s("td",null,"\u5F00\u542Fipc\u7EDF\u8BA1\uFF0C\u5305\u62EC (message queue, semaphores, shared memory)")],-1),U=s("tr",null,[s("td",null,"- -lock"),s("td",null,"\u5F00\u542F\u6587\u4EF6\u6240\u7EDF\u8BA1\uFF0C\u5305\u62EC (posix, flock, read, write)")],-1),R=s("tr",null,[s("td",null,"- -raw"),s("td",null,"\u5F00\u542Fraw\u7EDF\u8BA1 (raw sockets)")],-1),M=s("tr",null,[s("td",null,"- -socket"),s("td",null,"\u5F00\u542Fsockets\u7EDF\u8BA1\uFF0C\u5305\u62EC (total, tcp, udp, raw, ip-fragments)")],-1),T=s("tr",null,[s("td",null,"- -tcp"),s("td",null,"\u5F00\u542Ftcp\u7EDF\u8BA1\uFF0C\u5305\u62EC(listen, established, syn, time_wait, close)")],-1),N=s("tr",null,[s("td",null,"- -udp"),s("td",null,"\u5F00\u542Fudp\u7EDF\u8BA1 (listen, active)")],-1),V=s("tr",null,[s("td",null,"- -unix"),s("td",null,"\u5F00\u542Funix\u7EDF\u8BA1(datagram, stream, listen, active)")],-1),L=s("tr",null,[s("td",null,"- -vm"),s("td",null,"\u5F00\u542Fvm\u7EDF\u8BA1 (hard pagefaults, soft pagefaults, allocated, free)")],-1),z=s("td",null,"- -stat",-1),E=n("\u901A\u8FC7\u63D2\u4EF6\u540D\u79F0\u5F00\u542F\u63D2\u4EF6\u6269\u5C55\uFF0C\u8BE6\u89C1"),K={href:"http://blog.csdn.net/yue530tomtom/article/details/75443305#t7",target:"_blank",rel:"noopener noreferrer"},X=n("\u547D\u4EE4\u63D2\u4EF6"),A=n(" \uFF1A\u53EF\u80FD\u7684\u5185\u7F6E\u63D2\u4EF6\u4E3Aaio, cpu, cpu24, disk, disk24, disk24old, epoch, fs, int, int24, io, ipc, load, lock, mem, net, page, page24, proc, raw, socket, swap, swapold, sys, tcp, time,udp, unix, vm"),D=s("tr",null,[s("td",null,"- -list"),s("td",null,"\u5217\u4E3E\u5185\u7F6E\u63D2\u4EF6\u6269\u5C55\u7684\u540D\u79F0")],-1),F=s("tr",null,[s("td",null,"-a, - -all"),s("td",null,"\u662F\u9ED8\u8BA4\u503C\u76F8\u5F53\u4E8E -cdngy (default)")],-1),Q=s("tr",null,[s("td",null,"-f, - -full"),s("td",null,"\u76F8\u5F53\u4E8E -C, -D, -I, -N and -S")],-1),H=s("tr",null,[s("td",null,"-v, - -vmstat"),s("td",null,"\u76F8\u5F53\u4E8E -pmgdsc -D total")],-1),Z=s("tr",null,[s("td",null,"- -bw, - -blackonwhite"),s("td",null,"\u5728\u767D\u8272\u80CC\u666F\u7EC8\u7AEF\u4E0A\u6539\u53D8\u663E\u793A\u989C\u8272")],-1),j=s("tr",null,[s("td",null,"- -float"),s("td",null,"\u5728\u5C4F\u5E55\u4E0A\u7684\u8F93\u51FA\u5F3A\u5236\u663E\u793A\u4E3A\u6D6E\u70B9\u503C\uFF08\u5373\u5E26\u5C0F\u6570\uFF09(\u76F8\u53CD\u7684\u9009\u9879\u8BBE\u7F6E\u4E3A - -integer)")],-1),G=s("tr",null,[s("td",null,"- -integer"),s("td",null,"\u5728\u5C4F\u5E55\u4E0A\u7684\u8F93\u51FA\u5F3A\u5236\u663E\u793A\u4E3A\u6574\u6570\u503C\uFF0C\u6B64\u4E3A\u9ED8\u8BA4\u503C\uFF08\u76F8\u53CD\u7684\u9009\u9879\u8BBE\u7F6E\u4E3A- -float\uFF09")],-1),Y=s("tr",null,[s("td",null,"- -nocolor"),s("td",null,"\u7981\u7528\u989C\u8272(\u610F\u5473\u7740\u9009\u9879 - -noupdate)")],-1),J=s("tr",null,[s("td",null,"- -noheaders"),s("td",null,"\u7981\u6B62\u91CD\u590D\u8F93\u51FAheader\uFF0C\u9ED8\u8BA4\u4F1A\u6253\u5370\u4E00\u5C4F\u5E55\u8F93\u51FA\u4E00\u6B21header")],-1),W=s("tr",null,[s("td",null,"- -noupdate"),s("td",null,"\u5F53delay>1\u65F6\u7981\u6B62\u5728\u8FC7\u7A0B\u4E2D\u66F4\u65B0\uFF08\u5373\u5728\u65F6\u95F4\u95F4\u9694\u5185\u4E0D\u5141\u8BB8\u66F4\u65B0\uFF09")],-1),ss=s("tr",null,[s("td",null,"- -output file"),s("td",null,"\u8F93\u51FA\u7ED3\u679C\u5230cvs\u6587\u4EF6\u4E2D")],-1),ns=a(`<p>\u547D\u4EE4\u53C2\u6570</p><table><thead><tr><th>\u53C2\u6570\u540D\u79F0</th><th>\u53C2\u6570\u63CF\u8FF0</th></tr></thead><tbody><tr><td>delay</td><td>\u4E24\u6B21\u8F93\u51FA\u4E4B\u95F4\u7684\u65F6\u95F4\u95F4\u9694\uFF0C\u9ED8\u8BA4\u662F1s</td></tr><tr><td>count</td><td>\u62A5\u544A\u8F93\u51FA\u7684\u6B21\u6570\uFF0C\u9ED8\u8BA4\u662F\u6CA1\u6709\u9650\u5236\uFF0C\u4E00\u76F4\u8F93\u51FA\u77E5\u9053ctrl+c</td></tr></tbody></table><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6700\u57FA\u672C\u7684\u7528\u6CD5</span>
$ dstat
You did not <span class="token keyword">select</span> any stats, using <span class="token parameter variable">-cdngy</span> by default.
<span class="token comment"># total-cpu-usage cpu\u72B6\u6001</span>
<span class="token comment">#	usr \u7528\u6237\u4F7F\u7528\u5360\u6BD4</span>
<span class="token comment">#	sys \u7CFB\u7EDF\u4F7F\u7528\u5360\u6BD4</span>
<span class="token comment">#	idl \u7A7A\u95F2\u5360\u6BD4</span>
<span class="token comment">#	wai \u7B49\u5F85\u5360\u6BD4</span>
<span class="token comment">#	hiq \u786C\u4E2D\u65AD</span>
<span class="token comment">#	siq \u8F6F\u4E2D\u65AD</span>
<span class="token comment"># dsk/total \u78C1\u76D8\u7EDF\u8BA1</span>
<span class="token comment">#	read \u78C1\u76D8\u7684\u8BFB\u603B\u6570</span>
<span class="token comment">#	writ \u78C1\u76D8\u5199\u7684\u603B\u6570</span>
<span class="token comment"># net/total \u7F51\u7EDC\u7EDF\u8BA1</span>
<span class="token comment">#	recv \u663E\u793A\u7F51\u7EDC\u63A5\u6536\u7684\u603B\u6570</span>
<span class="token comment">#	send \u663E\u793A\u7F51\u7EDC\u53D1\u9001\u7684\u603B\u6570</span>
<span class="token comment"># paging \u5206\u9875\u7EDF\u8BA1</span>
<span class="token comment">#	in \u5206\u9875\u6362\u5165</span>
<span class="token comment">#	out \u5206\u9875\u6362\u51FA</span>
<span class="token comment"># system \u7CFB\u7EDF\u4E1B\u96C6</span>
<span class="token comment">#	int \u7EDF\u8BA1\u4E2D\u65AD</span>
<span class="token comment">#	csw \u4E0A\u4E0B\u5348\u5207\u6362</span>
----total-cpu-usage---- -dsk/total- -net/total- ---paging-- ---system--
usr sys idl wai hiq siq<span class="token operator">|</span> <span class="token builtin class-name">read</span>  writ<span class="token operator">|</span> recv  send<span class="token operator">|</span>  <span class="token keyword">in</span>   out <span class="token operator">|</span> int   csw
  <span class="token number">0</span>   <span class="token number">0</span> <span class="token number">100</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  87B   12k<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">174</span>   <span class="token number">223</span>
  <span class="token number">0</span>   <span class="token number">0</span> <span class="token number">100</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>   <span class="token number">0</span>  8192B<span class="token operator">|</span>1532B 2592B<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">264</span>   <span class="token number">336</span>
  <span class="token number">1</span>   <span class="token number">0</span>  <span class="token number">99</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>1151B 1859B<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">234</span>   <span class="token number">349</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53E6\u5916dstat\u9644\u5E26\u4E86\u5F88\u591A\u5F3A\u5927\u7684\u63D2\u4EF6\uFF0C\u8FD9\u4F7F\u5F97dstat\u66F4\u52A0\u5F3A\u5927\u3002\u53EF\u4EE5\u901A\u8FC7\u67E5\u770B/usr/share/dstat\u76EE\u5F55\u6765\u67E5\u770B\u5B83\u4EEC\u7684\u7528\u6237\u53D1.\u4F46dstat\u9644\u5E26\u5927\u91CF\u7684\u63D2\u4EF6\u5DF2\u7ECF\u5927\u5927\u6269\u5C55\u5176\u529F\u80FD\uFF0C\u4E0B\u9762\u662Fdstat\u9644\u5E26\u63D2\u4EF6\u7684\u4E00\u4E2A\u6982\u8FF0\uFF1A</p><table><thead><tr><th>\u63D2\u4EF6\u540D\u79F0</th><th>\u63D2\u4EF6\u63CF\u8FF0</th></tr></thead><tbody><tr><td>- -battery</td><td>\u7535\u6C60\u7535\u6C60\u767E\u5206\u6BD4(\u9700\u8981ACPI)</td></tr><tr><td>- -battery-remain</td><td>\u7535\u6C60\u5269\u4F59\u5C0F\u65F6\u3001\u5206\u949F(\u9700\u8981ACPI)</td></tr><tr><td>- -cpufreq</td><td>CPU\u9891\u7387\u767E\u5206\u6BD4(\u9700\u8981ACPI)</td></tr><tr><td>- -dbus</td><td>dbus\u8FDE\u63A5\u7684\u6570\u91CF(\u9700\u8981python-dbus)</td></tr><tr><td>- -disk-util</td><td>\u663E\u793A\u67D0\u4E00\u65F6\u95F4\u78C1\u76D8\u7684\u5FD9\u788C\u72B6\u51B5</td></tr><tr><td>- -fan</td><td>\u98CE\u6247\u8F6C\u901F(\u9700\u8981ACPI)</td></tr><tr><td>- -freespace</td><td>\u6BCF\u4E2A\u6587\u4EF6\u7CFB\u7EDF\u7684\u78C1\u76D8\u4F7F\u7528\u60C5\u51B5</td></tr><tr><td>- -gpfs</td><td>gpfs\u8BFB/\u5199 I / O(\u9700\u8981mmpmon)</td></tr><tr><td>- -gpfs-ops</td><td>GPFS\u6587\u4EF6\u7CFB\u7EDF\u64CD\u4F5C(\u9700\u8981mmpmon)</td></tr><tr><td>- -helloworld</td><td>dstat\u63D2\u4EF6Hello world\u793A\u4F8B</td></tr><tr><td>- -innodb-buffer</td><td>\u663E\u793Ainnodb\u7F13\u51B2\u533A\u7EDF\u8BA1</td></tr><tr><td>- -innodb-io</td><td>\u663E\u793Ainnodb I / O\u7EDF\u8BA1\u6570\u636E</td></tr><tr><td>- -innodb-ops</td><td>\u663E\u793Ainnodb\u64CD\u4F5C\u8BA1\u6570\u5668</td></tr><tr><td>- -lustre</td><td>\u663E\u793AlustreI / O\u541E\u5410\u91CF</td></tr><tr><td>- -memcache-hits</td><td>\u663E\u793Amemcache \u7684\u547D\u4E2D\u548C\u672A\u547D\u4E2D\u7684\u6570\u91CF</td></tr><tr><td>- -mysql5-cmds</td><td>\u663E\u793AMySQL5\u547D\u4EE4\u7EDF\u8BA1</td></tr><tr><td>- -mysql5-conn</td><td>\u663E\u793AMySQL5\u8FDE\u63A5\u7EDF\u8BA1</td></tr><tr><td>- -mysql5-io</td><td>MySQL5 I / O\u7EDF\u8BA1\u6570\u636E</td></tr><tr><td>- -mysql5-keys</td><td>\u663E\u793AMySQL5\u5173\u952E\u5B57\u7EDF\u8BA1</td></tr><tr><td>- -mysql-io</td><td>\u663E\u793AMySQL I / O\u7EDF\u8BA1\u6570\u636E</td></tr><tr><td>- -mysql-keys</td><td>\u663E\u793AMySQL\u5173\u952E\u5B57\u7EDF\u8BA1</td></tr><tr><td>- -net-packets</td><td>\u663E\u793A\u63A5\u6536\u548C\u53D1\u9001\u7684\u6570\u636E\u5305\u7684\u6570\u91CF</td></tr><tr><td>- -nfs3</td><td>\u663E\u793ANFS v3\u5BA2\u6237\u7AEF\u64CD\u4F5C</td></tr><tr><td>- -nfs3-ops</td><td>\u663E\u793A\u6269\u5C55NFS v3\u5BA2\u6237\u7AEF\u64CD\u4F5C</td></tr><tr><td>- -nfsd3</td><td>\u663E\u793ANFS v3\u670D\u52A1\u5668\u64CD\u4F5C</td></tr><tr><td>- -nfsd3-ops</td><td>\u663E\u793A\u6269\u5C55NFS v3\u670D\u52A1\u5668\u64CD\u4F5C</td></tr><tr><td>- -ntp</td><td>\u663E\u793ANTP\u670D\u52A1\u5668\u7684ntp\u65F6\u95F4</td></tr><tr><td>- -postfix</td><td>\u663E\u793A\u540E\u7F00\u961F\u5217\u5927\u5C0F(\u9700\u8981\u540E\u7F00)</td></tr><tr><td>- -power</td><td>\u663E\u793A\u7535\u6E90\u4F7F\u7528\u91CF</td></tr><tr><td>- -proc-count</td><td>\u663E\u793A\u5904\u7406\u5668\u7684\u603B\u6570</td></tr><tr><td>- -rpc</td><td>\u663E\u793Arpc\u5BA2\u6237\u7AEF\u8C03\u7528\u7EDF\u8BA1</td></tr><tr><td>- -rpcd</td><td>\u663E\u793ARPC\u670D\u52A1\u5668\u8C03\u7528\u7EDF\u8BA1</td></tr><tr><td>- -sendmail</td><td>\u663E\u793Asendmail\u961F\u5217\u5927\u5C0F(\u9700\u8981sendmail)</td></tr><tr><td>- -snooze</td><td>\u663E\u793A\u6BCF\u79D2\u8FD0\u7B97\u6B21\u6570</td></tr><tr><td>- -test</td><td>\u663E\u793A\u63D2\u4EF6\u8F93\u51FA</td></tr><tr><td>- -thermal</td><td>\u70ED\u7CFB\u7EDF\u7684\u6E29\u5EA6\u4F20\u611F\u5668</td></tr><tr><td>- -top-bio</td><td>\u663E\u793A\u6D88\u8017\u5757I/O\u6700\u5927\u7684\u8FDB\u7A0B</td></tr><tr><td>- -top-cpu</td><td>\u663E\u793A\u6D88\u8017CPU\u6700\u5927\u7684\u8FDB\u7A0B</td></tr><tr><td>- -top-cputime</td><td>\u663E\u793A\u4F7F\u7528CPU\u65F6\u95F4\u6700\u5927\u7684\u8FDB\u7A0B(\u5355\u4F4Dms)</td></tr><tr><td>- -top-cputime-avg</td><td>\u663E\u793A\u4F7F\u7528CPU\u65F6\u95F4\u5E73\u5747\u6700\u5927\u7684\u8FDB\u7A0B(\u5355\u4F4Dms)</td></tr><tr><td>- -top-io</td><td>\u663E\u793A\u6D88\u8017I/O\u6700\u5927\u8FDB\u7A0B</td></tr><tr><td>- -top-latency</td><td>\u663E\u793A\u603B\u5EF6\u8FDF\u6700\u5927\u7684\u8FDB\u7A0B(\u5355\u4F4Dms)</td></tr><tr><td>- -top-latency-avg</td><td>\u663E\u793A\u5E73\u5747\u5EF6\u65F6\u6700\u5927\u7684\u8FDB\u7A0B(\u5355\u4F4Dms)</td></tr><tr><td>- -top-mem</td><td>\u663E\u793A\u4F7F\u7528\u5185\u5B58\u6700\u5927\u7684\u8FDB\u7A0B</td></tr><tr><td>- -top-oom</td><td>\u663E\u793A\u7B2C\u4E00\u4E2A\u88ABOOM\u7ED3\u675F\u7684\u8FDB\u7A0B</td></tr><tr><td>- -utmp</td><td>\u663E\u793Autmp\u8FDE\u63A5\u7684\u6570\u91CF(\u9700\u8981python-utmp)</td></tr><tr><td>- -vmk-hba</td><td>\u663E\u793AVMware ESX\u5185\u6838vmhba\u7EDF\u8BA1\u6570</td></tr><tr><td>- -vmk-int</td><td>\u663E\u793AVMware ESX\u5185\u6838\u4E2D\u65AD\u6570\u636E</td></tr><tr><td>- -vmk-nic</td><td>\u663E\u793AVMware ESX\u5185\u6838\u7AEF\u53E3\u7EDF\u8BA1</td></tr><tr><td>- -vz-io</td><td>\u663E\u793A\u6BCF\u4E2AOpenVZ\u8BF7\u6C42CPU\u4F7F\u7528\u7387</td></tr><tr><td>- -vz-ubc</td><td>\u663E\u793AOpenVZ\u7528\u6237\u7EDF\u8BA1</td></tr><tr><td>- -wifi</td><td>\u65E0\u7EBF\u8FDE\u63A5\u8D28\u91CF\u548C\u4FE1\u53F7\u566A\u58F0\u6BD4</td></tr></tbody></table><p>\u5E38\u7528\u63D2\u4EF6</p><table><thead><tr><th>\u63D2\u4EF6\u540D\u79F0</th><th>\u63D2\u4EF6\u63CF\u8FF0</th></tr></thead><tbody><tr><td>- -disk-util</td><td>\u663E\u793A\u67D0\u4E00\u65F6\u95F4\u78C1\u76D8\u7684\u5FD9\u788C\u72B6\u51B5</td></tr><tr><td>- -freespace</td><td>\u663E\u793A\u5F53\u524D\u78C1\u76D8\u7A7A\u95F4\u4F7F\u7528\u7387</td></tr><tr><td>- -proc-count</td><td>\u663E\u793A\u6B63\u5728\u8FD0\u884C\u7684\u7A0B\u5E8F\u6570\u91CF</td></tr><tr><td>- -top-bio</td><td>\u663E\u793A\u5757I/O\u6700\u5927\u7684\u8FDB\u7A0B</td></tr><tr><td>- -top-cpu</td><td>\u663E\u793ACPU\u5360\u7528\u6700\u5927\u7684\u8FDB\u7A0B</td></tr><tr><td>- -top-io</td><td>\u663E\u793A\u6B63\u5E38I/O\u6700\u5927\u7684\u8FDB\u7A0B</td></tr><tr><td>- -top-mem</td><td>\u663E\u793A\u5360\u7528\u6700\u591A\u5185\u5B58\u7684\u8FDB\u7A0B</td></tr></tbody></table><p>\u5B9E\u4F8B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5185\u5B58\u8D44\u6E90\u4F7F\u7528\u60C5\u51B5</span>
$ dstat <span class="token parameter variable">-glms</span> --top-mem

<span class="token comment"># CPU\u8D44\u6E90\u4F7F\u7528\u60C5\u51B5</span>
$ dstat <span class="token parameter variable">-cyl</span> --proc-count --top-cpu

<span class="token comment"># \u76D1\u63A7\u6700\u6D88\u8017IO\u7684\u8FDB\u7A0B\u548C\u6700\u6D88\u8017\u8BBE\u5907IO\u7684\u8FDB\u7A0B</span>
$ dstat <span class="token parameter variable">-t</span> --top-io-adv --top-bio-adv

<span class="token comment"># \u76D1\u63A7swap\u3001process\u3001sockets\u3001filesystem\u5E76\u663E\u793A\u76D1\u63A7\u7684\u65F6\u95F4</span>
$ dstat <span class="token parameter variable">-tsp</span> <span class="token parameter variable">--socket</span> <span class="token parameter variable">--fs</span>

<span class="token comment"># \u76D1\u63A7\u6700\u6D88\u8017CPU/BLOCK/IO/\u5185\u5B58/IO\u7684\u8FDB\u7A0B</span>
$ dstat --top-cpu --top-bio --top-mem --top-io

<span class="token comment"># \u67E5\u770B8\u9897\u6838\u5FC3\uFF0C\u6BCF\u9897\u6838\u5FC3\u7684\u4F7F\u7528\u60C5\u51B5\u548CCPU\u4F7F\u7528\u60C5\u51B5</span>
$ dstat <span class="token parameter variable">-cl</span> <span class="token parameter variable">-C</span> <span class="token number">0,1</span>,2,3,4,5,6,7 --top-cpu

<span class="token comment"># \u663E\u793A\u6307\u5B9A\u7F51\u5361\u7684\u4FE1\u606F</span>
$ dstat <span class="token parameter variable">-tn</span> <span class="token parameter variable">-N</span> eth0

<span class="token comment"># \u6BCF5\u79D2\u663E\u793A\u4E00\u6B21tcp\u7684\u7EDF\u8BA1\u4FE1\u606F</span>
$ dstat <span class="token parameter variable">-tn</span> <span class="token parameter variable">-N</span> eth0 <span class="token parameter variable">--tcp</span> <span class="token number">5</span>

<span class="token comment"># \u5C06\u76D1\u63A7\u4FE1\u606F\u5199\u5165\u5230\u4E00\u4E2Acsv\u6587\u4EF6\u4E2D</span>
$ dstat \u2013output /tmp/sampleoutput.csv <span class="token parameter variable">-cdn</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5206\u6790\u7CFB\u7EDF\u74F6\u9888" tabindex="-1"><a class="header-anchor" href="#\u5206\u6790\u7CFB\u7EDF\u74F6\u9888" aria-hidden="true">#</a> \u5206\u6790\u7CFB\u7EDF\u74F6\u9888</h4><p>\u7CFB\u7EDF\u54CD\u5E94\u53D8\u6162\uFF0C\u9996\u5148\u9700\u8981\u5B9A\u4F4D\u5927\u81F4\u95EE\u9898\u51FA\u5728\u54EA\u91CC\uFF0C\u662FIO\u74F6\u9888\u3001CPU\u74F6\u9888\u3001\u5185\u5B58\u74F6\u9888\u8FD8\u662F\u7A0B\u5E8F\u5BFC\u81F4\u7684\u3002\u662F\u7528top\u547D\u4EE4\u80FD\u6BD4\u8F83\u5168\u9762\u7684\u770B\u5230\u8FD9\u4E9B\u5173\u6CE8\u70B9\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">top</span>
<span class="token function">top</span> - <span class="token number">14</span>:52:03 up <span class="token number">77</span> days, <span class="token number">17</span>:33,  <span class="token number">1</span> user,  load average: <span class="token number">0.00</span>, <span class="token number">0.01</span>, <span class="token number">0.05</span>
Tasks:  <span class="token number">80</span> total,   <span class="token number">1</span> running,  <span class="token number">79</span> sleeping,   <span class="token number">0</span> stopped,   <span class="token number">0</span> zombie
%Cpu<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:  <span class="token number">0.2</span> us,  <span class="token number">0.1</span> sy,  <span class="token number">0.0</span> ni, <span class="token number">99.7</span> id,  <span class="token number">0.1</span> wa,  <span class="token number">0.0</span> hi,  <span class="token number">0.0</span> si,  <span class="token number">0.0</span> st
KiB Mem <span class="token builtin class-name">:</span>  <span class="token number">3882032</span> total,   <span class="token number">206456</span> free,   <span class="token number">160164</span> used,  <span class="token number">3515412</span> buff/cache
KiB Swap:        <span class="token number">0</span> total,        <span class="token number">0</span> free,        <span class="token number">0</span> used.  <span class="token number">3416744</span> avail Mem

  PID <span class="token environment constant">USER</span>      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
    <span class="token number">1</span> root      <span class="token number">20</span>   <span class="token number">0</span>  <span class="token number">123092</span>   <span class="token number">3752</span>   <span class="token number">2432</span> S   <span class="token number">0.0</span>  <span class="token number">0.1</span>   <span class="token number">5</span>:03.66 systemd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FDB\u5165\u4EA4\u4E92\u6A21\u5F0F\u540E\uFF1A</p><ul><li>\u8F93\u5165M\uFF1A\u8FDB\u7A0B\u5217\u8868\u6309\u7167\u5185\u5B58\u4F7F\u7528\u5927\u5C0F\u6392\u5E8F\uFF0C\u4FBF\u4E8E\u89C2\u5BDF\u6700\u5927\u5185\u5B58\u4F7F\u7528\u8005</li><li>\u8F93\u5165P\uFF1A\u8FDB\u7A0B\u5217\u8868\u6309\u7167CPU\u4F7F\u7528\u7387\u6392\u5E8F\uFF0C\u4FBF\u4E8E\u89C2\u5BDF\u6700\u6D88\u8017CPU\u7684\u8FDB\u7A0B</li><li>%id \uFF1A\u7A7A\u95F2CPU\u65F6\u95F4\u767E\u5206\u6BD4\uFF0C\u5982\u679C\u8FD9\u4E2A\u503C\u8FC7\u4F4E\uFF0C\u8868\u660E\u7CFB\u7EDFCPU\u5B58\u5728\u74F6\u9888</li><li>%wa\uFF1A\u7B49\u5F85I/O\u7684CPU\u65F6\u95F4\u767E\u5206\u6BD4\uFF0C\u5982\u679C\u8FD9\u4E2A\u503C\u9AD8\uFF0C\u8868\u660EIO\u5B58\u5728\u74F6\u9888</li><li>\u901A\u8FC7Mem\uFF1Afree\u5B57\u6BB5\u5F88\u5C0F\uFF0C\u8868\u660E\u5185\u5B58\u4E0D\u8DB3</li></ul><p>\u5185\u5B58/CPU\u74F6\u9888</p><p>\u901A\u8FC7top\u7684Mem\u5B57\u6BB5\u4E2Dfree\u3001used\u3001total\u7B49\u5B57\u6BB5\u786E\u8BA4\u662F\u5185\u5B58\u74F6\u9888\u7684\u8BDD\uFF0C\u53EF\u4EE5\u8FDB\u4E00\u6B65\u662F\u7528free\u547D\u4EE4\u6765\u5206\u6790\u3002\u540C\u65F6\u4E5F\u53EF\u4EE5\u4F7F\u7528\u7EC4\u5408\u547D\u4EE4\u67E5\u627E\u4F7F\u7528\u5185\u5B58\u6700\u591A\u7684\u8FDB\u7A0B\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u67E5\u627E\u4F7F\u7528\u5185\u5B58\u6700\u591A\u768410\u4E2A\u8FDB\u7A0B</span>
$ <span class="token function">ps</span> <span class="token parameter variable">-aux</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-k4nr</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">10</span>

<span class="token comment"># \u67E5\u627E\u4F7F\u7528CPU\u6700\u591A\u7684\u662F\u4E2A\u8FDB\u7A0B</span>
$ <span class="token function">ps</span> <span class="token parameter variable">-aux</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-k3nr</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770BIO\u74F6\u9888</p><p>1.\u5F00\u542Fblock_dump,\u6B64\u65F6\u4F1A\u628Aio\u4FE1\u606F\u8F93\u5165\u5230dmesg\u4E2D echo 1 &gt; /proc/sys/vm/block_dump \u7EDF\u8BA1\u5F53\u524D\u5360\u7528IO\u6700\u9AD8\u768410\u4E2A\u8FDB\u7A0B\uFF1A dmesg |awk -F: &#39;{print $1}&#39;|sort|uniq -c|sort -rn|head -n 10 2.\u6D4B\u8BD5\u5B8C\u540E\uFF0C\u5173\u95EDblock_dumpblock_dump\u53C2\u6570 echo 0 &gt; /proc/sys/vm/block_dump</p><p>\u7F51\u7EDC\u4F7F\u7528</p><p>\u5982\u679C\u60F3\u8981\u76D1\u63A7\u8FDB\u7A0B\u4F7F\u7528\u7684\u7F51\u7EDC\u8D44\u6E90\uFF0C\u5EFA\u8BAE\u6309\u7167iftop\uFF0C\u5F53\u6D41\u91CF\u8F83\u5927\u65F6\u8FD9\u4E9B\u673A\u9047libpcap\u5E93\u7684\u5DE5\u5177\u8FB9\u4E0D\u662F\u90A3\u4E48\u597D\u7528\uFF0C\u6B64\u65F6\u53EF\u4EE5\u76F4\u63A5\u76F8\u5173\u7684\u7CFB\u7EDF\u6587\u4EF6\u5373\u53EF\u3002\u6BD4\u5982\u8981\u770Beth0\u4E0A\u7684\u4FE1\u606F\u53EF\u4EE5\u8BFB\u53D6\u5982\u4E0B\u6587\u4EF6</p><ul><li>/sys/class/net/eth0/statistics/rx_packets: \u6536\u5230\u7684\u6570\u636E\u5305\u6570\u636E</li><li>/sys/class/net/eth0/statistics/tx_packets: \u4F20\u8F93\u7684\u6570\u636E\u5305\u6570\u91CF</li><li>/sys/class/net/eth0/statistics/rx_bytes: \u63A5\u6536\u7684\u5B57\u8282\u6570</li><li>/sys/class/net/eth0/statistics/tx_bytes: \u4F20\u8F93\u7684\u5B57\u8282\u6570</li><li>/sys/class/net/eth0/statistics/rx_dropped: \u5F53\u6536\u5230\u5305\u6570\u636E\u5305\u4E0B\u964D\u7684\u6570\u636E\u91CF</li><li>/sys/class/net/eth0/statistics/tx_dropped: \u4F20\u8F93\u5305\u6570\u636E\u5305\u4E0B\u964D\u7684\u6570\u636E\u91CF</li></ul><p>\u5982\u4E0B\u662Fjoemiller\u5927\u725B\u53D1\u5E03\u7684\u811A\u6B65\u53EF\u4EE5\u68C0\u6D4B\u5BF9\u5E94\u6587\u4EF6\u5E76\u663E\u793A</p><p>\u6D4B\u91CF\u7F51\u53E3\u6BCF\u79D2\u6570\u636E\u5305\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
 
<span class="token assign-left variable">INTERVAL</span><span class="token operator">=</span><span class="token string">&quot;1&quot;</span>  <span class="token comment"># update interval in seconds</span>
 
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> usage: <span class="token variable">$0</span> <span class="token punctuation">[</span>network-interface<span class="token punctuation">]</span>
        <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> e.g. <span class="token variable">$0</span> eth0
        <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> shows packets-per-second
        <span class="token builtin class-name">exit</span>
<span class="token keyword">fi</span>
 
<span class="token assign-left variable">IF</span><span class="token operator">=</span><span class="token variable">$1</span>
 
<span class="token keyword">while</span> <span class="token boolean">true</span>
<span class="token keyword">do</span>
        <span class="token assign-left variable">R1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">cat</span> /sys/class/net/$1/statistics/rx_packets<span class="token variable">\`</span></span>
        <span class="token assign-left variable">T1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">cat</span> /sys/class/net/$1/statistics/tx_packets<span class="token variable">\`</span></span>
        <span class="token function">sleep</span> <span class="token variable">$INTERVAL</span>
        <span class="token assign-left variable">R2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">cat</span> /sys/class/net/$1/statistics/rx_packets<span class="token variable">\`</span></span>
        <span class="token assign-left variable">T2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">cat</span> /sys/class/net/$1/statistics/tx_packets<span class="token variable">\`</span></span>
        <span class="token assign-left variable">TXPPS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $T2 - $T1<span class="token variable">\`</span></span>
        <span class="token assign-left variable">RXPPS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $R2 - $R1<span class="token variable">\`</span></span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;TX <span class="token variable">$1</span>: <span class="token variable">$TXPPS</span> pkts/s RX <span class="token variable">$1</span>: <span class="token variable">$RXPPS</span> pkts/s&quot;</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7F51\u7EDC\u5E26\u5BBD\u6D4B\u91CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
 
<span class="token assign-left variable">INTERVAL</span><span class="token operator">=</span><span class="token string">&quot;1&quot;</span>  <span class="token comment"># update interval in seconds</span>
 
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> usage: <span class="token variable">$0</span> <span class="token punctuation">[</span>network-interface<span class="token punctuation">]</span>
        <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> e.g. <span class="token variable">$0</span> eth0
        <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">exit</span>
<span class="token keyword">fi</span>
 
<span class="token assign-left variable">IF</span><span class="token operator">=</span><span class="token variable">$1</span>
 
<span class="token keyword">while</span> <span class="token boolean">true</span>
<span class="token keyword">do</span>
        <span class="token assign-left variable">R1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">cat</span> /sys/class/net/$1/statistics/rx_bytes<span class="token variable">\`</span></span>
        <span class="token assign-left variable">T1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">cat</span> /sys/class/net/$1/statistics/tx_bytes<span class="token variable">\`</span></span>
        <span class="token function">sleep</span> <span class="token variable">$INTERVAL</span>
        <span class="token assign-left variable">R2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">cat</span> /sys/class/net/$1/statistics/rx_bytes<span class="token variable">\`</span></span>
        <span class="token assign-left variable">T2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">cat</span> /sys/class/net/$1/statistics/tx_bytes<span class="token variable">\`</span></span>
        <span class="token assign-left variable">TBPS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $T2 - $T1<span class="token variable">\`</span></span>
        <span class="token assign-left variable">RBPS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $R2 - $R1<span class="token variable">\`</span></span>
        <span class="token assign-left variable">TKBPS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $TBPS / <span class="token number">1024</span><span class="token variable">\`</span></span>
        <span class="token assign-left variable">RKBPS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $RBPS / <span class="token number">1024</span><span class="token variable">\`</span></span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;TX <span class="token variable">$1</span>: <span class="token variable">$TKBPS</span> kb/s RX <span class="token variable">$1</span>: <span class="token variable">$RKBPS</span> kb/s&quot;</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u7A0B\u5E8F\u74F6\u9888\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u7A0B\u5E8F\u74F6\u9888\u5206\u6790" aria-hidden="true">#</a> \u7A0B\u5E8F\u74F6\u9888\u5206\u6790</h4><p>\u5F53\u786E\u5B9A\u662F\u67D0\u4E2A\u7A0B\u5E8F\u7684\u95EE\u9898\u540E\uFF0C\u53EF\u4EE5\u6839\u636E\u7A0B\u5E8F\u7684\u8BED\u8A00\u67E5\u627E\u5BF9\u5E94\u7684\u5DE5\u5177\u8FDB\u884C\u6027\u80FD\u7684\u5206\u6790\u3002\u5F53\u7136\u4E5F\u53EF\u4EE5\u4F7F\u7528pstatck\u548Cpstrace\u3001straced\u7B49\u8DDF\u8E2A\u5668\u8FDB\u884C\u5206\u6790\u3002</p><h4 id="\u53C2\u8003" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a> \u53C2\u8003</h4><p>http://www.brendangregg.com/linuxperf.html</p>`,31);function as(es,ts){const e=l("ExternalLinkIcon");return i(),p("div",null,[o,s("table",null,[r,s("tbody",null,[u,m,v,b,k,h,_,g,f,w,y,x,I,P,$,O,q,C,B,S,U,R,M,T,N,V,L,s("tr",null,[z,s("td",null,[E,s("a",K,[X,c(e)]),A])]),D,F,Q,H,Z,j,G,Y,J,W,ss])]),ns])}const is=t(d,[["render",as],["__file","monitor.html.vue"]]);export{is as default};
