import{_ as s,o as n,c as a,e}from"./app.a667bd71.js";const t={},p=e(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#\`\`\`ops</span>
<span class="token comment">#title:CentOS7 \u7F51\u5361\u91CD\u547D\u540Deth0</span>
<span class="token comment">#descr:</span>
<span class="token comment">#\`\`\`</span>

<span class="token comment"># \u68C0\u67E5\u662F\u5426run in root </span>
<span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> <span class="token parameter variable">-u</span><span class="token variable">)</span></span> <span class="token parameter variable">-gt</span> <span class="token number">0</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;please use root run the script! &quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>

<span class="token comment"># \u5224\u65ADlshw\u662F\u5426\u5B89\u88C5 </span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> lshw<span class="token operator">|</span><span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">\`</span></span> <span class="token parameter variable">-eq</span> <span class="token number">0</span>  <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\\033">\\033</span>[31m Error please install lshw! <span class="token entity" title="\\033">\\033</span>[0m&quot;</span>
    <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>

<span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /etc/init.d/functions <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">.</span> /etc/init.d/functions
<span class="token comment"># \u4FEE\u6539\u7F51\u5361\u914D\u7F6E\u6587\u4EF6\u540D\u79F0</span>
<span class="token keyword">function</span> <span class="token function-name function">net</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token assign-left variable">b0</span><span class="token operator">=</span>-1
<span class="token function">cat</span> /proc/net/dev <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">&#39;:&#39;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">&#39;lo&#39;</span> <span class="token operator">|</span> <span class="token function">cut</span> -d: <span class="token parameter variable">-f1</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">&gt;&gt;</span> /tmp/net_name.txt
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> line
<span class="token keyword">do</span>
 <span class="token assign-left variable">c0</span><span class="token operator">=</span><span class="token variable">$line</span>
 <span class="token assign-left variable">b0</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $b0 + <span class="token number">1</span><span class="token variable">\`</span></span>
 <span class="token function">mv</span> /etc/sysconfig/network-scripts/ifcfg-<span class="token variable">$c0</span> /etc/sysconfig/network-scripts/ifcfg-eth<span class="token variable">$b0</span>
<span class="token comment"># \u4FEE\u6539\u7F51\u5361\u6A21\u5F0F\u4E3Astatic</span>
 <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/dhcp/static/g&#39;</span> /etc/sysconfig/network-scripts/ifcfg-eth<span class="token variable">$b0</span>
<span class="token comment"># \u5220\u9664\u5305\u542BIPV6\u7684\u884C</span>
 <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;/IPV6/d&#39;</span> /etc/sysconfig/network-scripts/ifcfg-eth<span class="token variable">$b0</span>
<span class="token comment"># \u4FEE\u6539\u7F51\u5361DEVICE\u4E3Aeth.</span>
 <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/&#39;</span><span class="token variable">$c0</span><span class="token string">&#39;/eth&#39;</span><span class="token variable">$b0</span><span class="token string">&#39;/g&#39;</span> /etc/sysconfig/network-scripts/ifcfg-eth<span class="token variable">$b0</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> /tmp/net_name.txt
<span class="token punctuation">}</span>
<span class="token comment"># \u91CD\u65B0\u914D\u7F6Egrub\u914D\u7F6E\u5E76\u66F4\u65B0\u5185\u6838</span>
<span class="token keyword">function</span> <span class="token function-name function">grub</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/crashkernel=auto rhgb quiet/crashkernel=auto net.ifnames=0 biosdevname=0 rhgb quiet/g&#39;</span> /etc/default/grub
grub2-mkconfig <span class="token parameter variable">-o</span> /boot/grub2/grub.cfg
<span class="token punctuation">}</span>
 
<span class="token comment"># \u4FEE\u6539\u7F51\u5361\u521B\u5EFA\u547D\u540D\u89C4\u5219</span>
<span class="token keyword">function</span> <span class="token function-name function">rules</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token assign-left variable">b0</span><span class="token operator">=</span>-1<span class="token punctuation">;</span>
 lshw <span class="token parameter variable">-c</span> network<span class="token operator">|</span> <span class="token function">egrep</span> <span class="token string">&quot;logical name&quot;</span> <span class="token operator">|</span><span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot; &quot;</span> <span class="token string">&#39;{print $3}&#39;</span> <span class="token operator">|</span><span class="token keyword">while</span> <span class="token builtin class-name">read</span> line
<span class="token keyword">do</span>
 <span class="token assign-left variable">a0</span><span class="token operator">=</span><span class="token variable">$line</span>
 <span class="token assign-left variable">b0</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $b0 + <span class="token number">1</span><span class="token variable">\`</span></span>
 <span class="token assign-left variable">c0</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span>lshw <span class="token parameter variable">-c</span> network <span class="token operator">|</span> <span class="token function">egrep</span> <span class="token parameter variable">-C</span> <span class="token number">2</span> $a0<span class="token operator">|</span><span class="token function">egrep</span> serial <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot; &quot;</span> <span class="token string">&#39;{print $2}&#39;</span><span class="token variable">\`</span></span>
 <span class="token assign-left variable">d0</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span>lshw <span class="token parameter variable">-c</span> network <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-C</span> <span class="token number">2</span> $a0<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">&quot;bus info&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;@&quot;</span> <span class="token string">&#39;{print $2}&#39;</span><span class="token variable">\`</span></span>
 <span class="token builtin class-name">echo</span> <span class="token string">&#39;ACTION==&quot;add&quot;, SUBSYSTEM==&quot;net&quot;, BUS==&quot;pci&quot;, ATTR{address}==&quot;&#39;</span><span class="token variable">$c0</span><span class="token string">&#39;&quot;, ID==&quot;&#39;</span><span class="token variable">$d0</span><span class="token string">&#39;&quot;, NAME=&quot;eth&#39;</span><span class="token variable">$b0</span><span class="token string">&#39;&quot;&#39;</span> <span class="token operator">&gt;&gt;</span>/etc/udev/rules.d/70-persistent-net.rules
 <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;$a HWADDR=&#39;</span><span class="token variable">$c0</span><span class="token string">&#39;&#39;</span> /etc/sysconfig/network-scripts/ifcfg-eth<span class="token variable">$b0</span>
<span class="token keyword">done</span>
<span class="token punctuation">}</span>
net
grub
rules

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),l=[p];function o(c,i){return n(),a("div",null,l)}const k=s(t,[["render",o],["__file","setiface-sh.html.vue"]]);export{k as default};
