import{_ as n,o as s,c as a,e as t}from"./app.a667bd71.js";const p={},o=t(`<p>\u7EDF\u8BA1\u8F93\u51FA\u603B\u8017\u65F6\u5728\u4E00\u4E9B\u65E5\u5E38\u5F00\u53D1\u6D4B\u8BD5\u4E2D\u6BD4\u8F83\u591A\uFF0C\u4F46\u901A\u5E38\u4F1A\u60F3\u5230\u7684\u83B7\u53D6\u65F6\u95F4\u518D\u76F8\u51CF\u7684\u65B9\u6CD5\uFF0C\u6709\u65F6\u5019\u4F7F\u7528\u8D77\u6765\u6BD4\u8F83\u9EBB\u70E6\uFF0C\u4E3A\u6B64spring\u63D0\u4F9B\u4E86\u4E00\u4E2A\u4F18\u96C5\u4E14\u6BD4\u8F83\u5B9E\u7528\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StopWatch</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringStopWatchExample3</span> <span class="token punctuation">{</span>  
  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>  
        <span class="token class-name">StopWatch</span> sw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StopWatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        sw<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        sw<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        sw<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        sw<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        sw<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        sw<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sw<span class="token punctuation">.</span><span class="token function">prettyPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>StopWatch <span class="token string">&#39;&#39;</span><span class="token builtin class-name">:</span> running <span class="token function">time</span> <span class="token punctuation">(</span>millis<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1031</span>  
-----------------------------------------  
ms     %     Task name  
-----------------------------------------  
00514  050%  A  
00302  029%  B  
00215  021%  C:
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0D\u540C\u7684\u6253\u5370\u7ED3\u679C</p><p>getTotalTimeSeconds() \u83B7\u53D6\u603B\u8017\u65F6\u79D2\uFF0C\u540C\u65F6\u4E5F\u6709\u83B7\u53D6\u6BEB\u79D2\u7684\u65B9\u6CD5 prettyPrint() \u4F18\u96C5\u7684\u683C\u5F0F\u6253\u5370\u7ED3\u679C\uFF0C\u8868\u683C\u5F62\u5F0F shortSummary() \u8FD4\u56DE\u7B80\u77ED\u7684\u603B\u8017\u65F6\u63CF\u8FF0 getTaskCount() \u8FD4\u56DE\u7EDF\u8BA1\u65F6\u95F4\u4EFB\u52A1\u7684\u6570\u91CF getLastTaskInfo().getTaskName() \u8FD4\u56DE\u6700\u540E\u4E00\u4E2A\u4EFB\u52A1TaskInfo\u5BF9\u8C61\u7684\u540D\u79F0</p><p>\u66F4\u591A\u67E5\u770B\u6587\u6863 https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/StopWatch.html</p><p>\u25A0 guava\u63D0\u4F9B\u7684stopwatch google \u7684\u79D2\u8868 Stopwatch \u76F8\u6BD4 Spring framewrk core \u5305 \u548C apache commons lang3 \u5305\u7684\u79D2\u8868\u662F\u6700\u65B9\u4FBF\u4F7F\u7528\u7684\u3002\u6B64\u7C7B\u4E0D\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
    * Stopwatch createStarted()\uFF1A\u521B\u5EFA\uFF08\u5E76\u542F\u52A8\uFF09\u4E00\u4E2A\u65B0\u7684\u79D2\u8868\uFF0C\u4F7F\u7528 System#nanoTime \u6765\u4F5C\u4E3A\u5176\u65F6\u95F4\u6E90\u3002
    * Stopwatch createUnstarted()\uFF1A\u521B\u5EFA\uFF08\u4F46\u4E0D\u542F\u52A8\uFF09\u4E00\u4E2A\u65B0\u7684\u79D2\u8868\uFF0C\u4F7F\u7528 System#nanoTime \u6765\u4F5C\u4E3A\u5176\u65F6\u95F4\u6E90\u3002
    * long elapsed(TimeUnit desiredUnit)\uFF1A\u8FD4\u56DE\u6B64\u79D2\u8868\u4E0A\u663E\u793A\u7684\u5F53\u524D\u5DF2\u7528\u65F6\u95F4\uFF0C\u4EE5\u6240\u9700\u7684\u65F6\u95F4\u5355\u4F4D\u8868\u793A\uFF0C\u4EFB\u4F55\u5206\u6570\u5411\u4E0B\u820D\u5165
    * boolean isRunning()\uFF1A\u5982\u679C\u5DF2\u5728\u6B64\u79D2\u8868\u4E0A\u8C03\u7528start\uFF08\uFF09<span class="token punctuation">}</span>\uFF0C\u5E76\u4E14\u81EA\u4E0A\u6B21\u8C03\u7528start\uFF08\uFF09\u4EE5\u6765\u672A\u8C03\u7528stop\uFF08\uFF09\uFF0C\u5219\u8FD4\u56DEtrue
    * Stopwatch reset()\uFF1A\u5C06\u6B64\u79D2\u8868\u7684\u8FD0\u884C\u65F6\u95F4\u8BBE\u7F6E\u4E3A\u96F6\uFF0C\u5E76\u5C06\u5176\u7F6E\u4E8E\u505C\u6B62\u72B6\u6001\u3002
    * Stopwatch start()\uFF1A\u542F\u52A8\u79D2\u8868,\u5982\u679C\u79D2\u8868\u5DF2\u7ECF\u5728\u8FD0\u884C\uFF0C\u5219 IllegalStateException
    * Stopwatch stop()\uFF1A\u505C\u6B62\u79D2\u8868\uFF0C\u5C06\u6765\u7684\u8BFB\u53D6\u5C06\u8FD4\u56DE\u5230\u76EE\u524D\u4E3A\u6B62\u7ECF\u8FC7\u7684\u56FA\u5B9A\u6301\u7EED\u65F6\u95F4\u3002
    * tring toString()\uFF1A\u8FD4\u56DE\u5F53\u524D\u8FD0\u884C\u65F6\u95F4\u7684\u5B57\u7B26\u4E32\u8868\u793A\u5F62\u5F0F\uFF0C\u6BD4\u5982 2.588 s\uFF0C106.8 ms
    */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testStopwatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token class-name">SecureRandom</span> secureRandom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Stopwatch</span> stopwatch <span class="token operator">=</span> <span class="token class-name">Stopwatch</span><span class="token punctuation">.</span><span class="token function">createStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> nextInt <span class="token operator">=</span> secureRandom<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A11\u9884\u7B97\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> nextInt<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4EFB\u52A11\u9884\u7B97\u8017\u65F6\uFF1A81</span>
    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>nextInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\t\u4EFB\u52A11\u5B9E\u9645\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> stopwatch<span class="token punctuation">.</span><span class="token function">elapsed</span><span class="token punctuation">(</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;(\u6BEB\u79D2)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u4EFB\u52A11\u5B9E\u9645\u8017\u65F6\uFF1A563(\u6BEB\u79D2)</span>

    stopwatch<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nextInt <span class="token operator">=</span> secureRandom<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A12\u9884\u7B97\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> nextInt<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4EFB\u52A12\u9884\u7B97\u8017\u65F6\uFF1A1591</span>
    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>nextInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\t\u4EFB\u52A12\u5B9E\u9645\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> stopwatch<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u4EFB\u52A12\u5B9E\u9645\u8017\u65F6\uFF1A1.592 s</span>

    stopwatch<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nextInt <span class="token operator">=</span> secureRandom<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A13\u9884\u8BA1\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> nextInt<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4EFB\u52A13\u9884\u8BA1\u8017\u65F6\uFF1A1964</span>
    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>nextInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\t\u4EFB\u52A13\u5B9E\u9645\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> stopwatch<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u4EFB\u52A13\u5B9E\u9645\u8017\u65F6\uFF1A1.965 s</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),c=[o];function e(u,l){return s(),a("div",null,c)}const k=n(p,[["render",e],["__file","java-StopWatch.html.vue"]]);export{k as default};
