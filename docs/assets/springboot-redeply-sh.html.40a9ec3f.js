import{_ as s,o as n,c as a,e}from"./app.a667bd71.js";const p={},t=e(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#\`\`\`ops</span>
<span class="token comment">#title:springboot\u91CD\u65B0\u66F4\u65B0\u4EE3\u7801\u5E76\u90E8\u7F72</span>
<span class="token comment">#descr:</span>
<span class="token comment">#\`\`\`</span>

<span class="token comment"># \u91CD\u542F\u8FDB\u7A0B</span>
<span class="token function-name function">funRestartTSApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment"># \u91CD\u542F\u8FDB\u7A0B</span>
    <span class="token assign-left variable">ProcNumber</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">&#39;springboot-app&#39;</span><span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;{print $2}&#39;</span><span class="token variable">\`</span></span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$ProcNumber</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$ProcNumber</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;The process does not exist and is started&quot;</span>
        <span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> /local/workspace/build/springboot-app-1.0.0.jar <span class="token parameter variable">--spring.profiles.active</span><span class="token operator">=</span>pro <span class="token operator">&gt;&gt;</span> /data/log/springboot-run.log  <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;The process will restart&quot;</span>
        <span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token variable">$ProcNumber</span>
        <span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> /local/workspace/build/springboot-app-1.0.0.jar <span class="token parameter variable">--spring.profiles.active</span><span class="token operator">=</span>pro <span class="token operator">&gt;&gt;</span> /data/log/springboot-run.log  <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment">## \u5907\u4EFD\u4EE3\u7801</span>
<span class="token assign-left variable">datestr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">date</span> +%Y%m%d%H%M%S<span class="token variable">\`</span></span>
<span class="token function">mkdir</span> /local/workspace/back/<span class="token variable">\${datestr}</span>
<span class="token function">find</span> /local/workspace/build/ <span class="token parameter variable">-name</span> <span class="token string">&quot;*.jar&quot;</span> <span class="token parameter variable">-exec</span> <span class="token function">mv</span> <span class="token string">&quot;{}&quot;</span> /local/workspace/back/<span class="token variable">\${datestr}</span> <span class="token punctuation">\\</span><span class="token punctuation">;</span>

<span class="token comment">## \u66F4\u65B0svn\u4EE3\u7801\u5E76\u91CD\u65B0\u6253\u5305</span>
<span class="token builtin class-name">cd</span> /local/workspace/springboot/
/usr/bin/svn update <span class="token builtin class-name">.</span> <span class="token operator">&amp;&amp;</span> mvn clean <span class="token operator">&amp;&amp;</span> mvn package <span class="token punctuation">\\</span>
  <span class="token operator">&amp;&amp;</span> <span class="token function">find</span> /local/workspace/springboot/ <span class="token parameter variable">-name</span> *.jar <span class="token parameter variable">-exec</span>  <span class="token function">cp</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> /local/workspace/build/ <span class="token punctuation">\\</span><span class="token punctuation">;</span> <span class="token punctuation">\\</span>
  <span class="token operator">&amp;&amp;</span> funRestartTSApp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),o=[t];function l(c,i){return n(),a("div",null,o)}const k=s(p,[["render",l],["__file","springboot-redeply-sh.html.vue"]]);export{k as default};
