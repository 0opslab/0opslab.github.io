import{_ as s,o as n,c as a,e}from"./app.a667bd71.js";const p={},l=e(`<h3 id="\u7528\u6237\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#\u7528\u6237\u7BA1\u7406" aria-hidden="true">#</a> \u7528\u6237\u7BA1\u7406</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">users</span>                   <span class="token comment"># \u663E\u793A\u6240\u6709\u7684\u767B\u5F55\u7528\u6237</span>
<span class="token function">groups</span>                  <span class="token comment"># \u5217\u51FA\u5F53\u524D\u7528\u6237\u548C\u4ED6\u6240\u5C5E\u7684\u7EC4</span>
<span class="token function">who</span> <span class="token parameter variable">-q</span>                  <span class="token comment"># \u663E\u793A\u6240\u6709\u7684\u767B\u5F55\u7528\u6237</span>
<span class="token function">groupadd</span>                <span class="token comment"># \u6DFB\u52A0\u7EC4</span>
<span class="token function">useradd</span> user            <span class="token comment"># \u5EFA\u7ACB\u7528\u6237</span>
<span class="token function">passwd</span> \u7528\u6237             <span class="token comment"># \u4FEE\u6539\u5BC6\u7801</span>
<span class="token function">userdel</span> <span class="token parameter variable">-r</span>              <span class="token comment"># \u5220\u9664\u5E10\u53F7\u53CA\u5BB6\u76EE\u5F55</span>
<span class="token function">chown</span> <span class="token parameter variable">-R</span> user:group     <span class="token comment"># \u4FEE\u6539\u76EE\u5F55\u62E5\u6709\u8005(R\u9012\u5F52)</span>
<span class="token function">chown</span> y<span class="token punctuation">\\</span>.li:mysql       <span class="token comment"># \u4FEE\u6539\u6240\u6709\u8005\u7528\u6237\u4E2D\u5305\u542B\u70B9&quot;.&quot;</span>
<span class="token builtin class-name">umask</span>                   <span class="token comment"># \u8BBE\u7F6E\u7528\u6237\u6587\u4EF6\u548C\u76EE\u5F55\u7684\u6587\u4EF6\u521B\u5EFA\u7F3A\u7701\u5C4F\u853D\u503C</span>
<span class="token function">chgrp</span>                   <span class="token comment"># \u4FEE\u6539\u7528\u6237\u7EC4</span>
finger                  <span class="token comment"># \u67E5\u627E\u7528\u6237\u663E\u793A\u4FE1\u606F</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;xuesong&quot;</span> <span class="token operator">|</span> <span class="token function">passwd</span> user <span class="token parameter variable">--stdin</span>       <span class="token comment"># \u975E\u4EA4\u4E92\u4FEE\u6539\u5BC6\u7801</span>
<span class="token function">useradd</span> <span class="token parameter variable">-g</span> www <span class="token parameter variable">-M</span>  <span class="token parameter variable">-s</span> /sbin/nologin  www   <span class="token comment"># \u6307\u5B9A\u7EC4\u5E76\u4E0D\u5141\u8BB8\u767B\u5F55\u7684\u7528\u6237,nologin\u5141\u8BB8\u4F7F\u7528\u670D\u52A1</span>
<span class="token function">useradd</span> <span class="token parameter variable">-g</span> www <span class="token parameter variable">-M</span>  <span class="token parameter variable">-s</span> /bin/false  www      <span class="token comment"># \u6307\u5B9A\u7EC4\u5E76\u4E0D\u5141\u8BB8\u767B\u5F55\u7684\u7528\u6237,false\u6700\u4E3A\u4E25\u683C</span>
<span class="token function">usermod</span> <span class="token parameter variable">-l</span> \u65B0\u7528\u6237\u540D \u8001\u7528\u6237\u540D               <span class="token comment"># \u4FEE\u6539\u7528\u6237\u540D</span>
<span class="token function">usermod</span> <span class="token parameter variable">-g</span> user group                      <span class="token comment"># \u4FEE\u6539\u7528\u6237\u6240\u5C5E\u7EC4</span>
<span class="token function">usermod</span> <span class="token parameter variable">-d</span> \u76EE\u5F55 <span class="token parameter variable">-m</span> \u7528\u6237                    <span class="token comment"># \u4FEE\u6539\u7528\u6237\u5BB6\u76EE\u5F55</span>
<span class="token function">usermod</span> <span class="token parameter variable">-G</span> group user                      <span class="token comment"># \u5C06\u7528\u6237\u6DFB\u52A0\u5230\u9644\u52A0\u7EC4</span>
gpasswd <span class="token parameter variable">-d</span> user group                      <span class="token comment"># \u4ECE\u7EC4\u4E2D\u5220\u9664\u7528\u6237</span>
<span class="token function">su</span> - user <span class="token parameter variable">-c</span> <span class="token string">&quot; #\u547D\u4EE41; &quot;</span>                   <span class="token comment"># \u5207\u6362\u7528\u6237\u6267\u884C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4E00\u4E9B\u5E38\u7528\u7684\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#\u4E00\u4E9B\u5E38\u7528\u7684\u811A\u672C" aria-hidden="true">#</a> \u4E00\u4E9B\u5E38\u7528\u7684\u811A\u672C</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token comment">#!/bin/bash</span>
<span class="token comment">#</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Enter a user name: &quot;</span> userName

<span class="token keyword">while</span> <span class="token operator">!</span> <span class="token function">id</span> <span class="token variable">$userName</span> <span class="token operator">&amp;&gt;</span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Enter a user name again: &quot;</span> userName
<span class="token keyword">done</span>

<span class="token function">who</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;^<span class="token variable">$userName</span>&quot;</span> <span class="token operator">&amp;&gt;</span> /dev/null
<span class="token assign-left variable">retVal</span><span class="token operator">=</span><span class="token variable">$?</span>

<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$retVal</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token function">sleep</span> <span class="token number">5</span>
	<span class="token function">who</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;^<span class="token variable">$userName</span>&quot;</span> <span class="token operator">&amp;&gt;</span> /dev/null
	<span class="token assign-left variable">retVal</span><span class="token operator">=</span><span class="token variable">$?</span>	
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$userName</span> is on.&quot;</span>


<span class="token function">cat</span> userlist.log
username  password
<span class="token builtin class-name">test</span>      <span class="token number">123123</span>
aaa       <span class="token number">123123</span>

<span class="token comment">########\u6279\u91CF\u6DFB\u52A0\u7528\u6237</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">name</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> userlist.log <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&#39; &#39;</span> <span class="token string">&#39;{print $1}&#39;</span><span class="token variable">)</span></span>
<span class="token keyword">do</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token variable">$name</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token function">useradd</span> <span class="token parameter variable">-m</span> <span class="token variable">$name</span>
    <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> userlist.log  <span class="token operator">|</span><span class="token function">grep</span> $name <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&#39; &#39;</span> <span class="token string">&#39;{print $2}&#39;</span><span class="token variable">)</span></span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> <span class="token variable">$name</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;user is null&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token comment">########\u6279\u91CF\u5220\u9664\u7528\u6237</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">name</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> userlist.log <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&#39; &#39;</span> <span class="token string">&#39;{print $1}&#39;</span><span class="token variable">)</span></span>
<span class="token keyword">do</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token variable">$name</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token function">userdel</span> <span class="token variable">$name</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;user is null&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>


<span class="token assign-left variable">UserName</span><span class="token operator">=</span><span class="token string">&quot;user4&quot;</span>
<span class="token function">useradd</span> <span class="token variable">$UserName</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$UserName</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> <span class="token variable">$UserName</span> <span class="token operator">&gt;</span> /dev/null
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Add <span class="token variable">$UserName</span> successfully.&quot;</span>

<span class="token function">useradd</span> user2
<span class="token builtin class-name">echo</span> user2 <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> user2 <span class="token operator">&gt;</span> /dev/null
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Add user2 successfully.&quot;</span>

<span class="token function">useradd</span> user3
<span class="token builtin class-name">echo</span> user3 <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> user3 <span class="token operator">&gt;</span> /dev/null



<span class="token comment">#</span>
<span class="token assign-left variable">UserName</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span>dialog <span class="token parameter variable">--stdout</span> <span class="token parameter variable">--backtitle</span> <span class="token string">&quot;Add a user.&quot;</span> <span class="token parameter variable">--title</span> <span class="token string">&quot;UserName&quot;</span> <span class="token parameter variable">--inputbox</span> <span class="token string">&quot;Please input a username: &quot;</span> <span class="token number">10</span> <span class="token number">25</span><span class="token variable">\`</span></span>
<span class="token assign-left variable">RETVAL</span><span class="token operator">=</span><span class="token variable">$?</span>
<span class="token function">clear</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$RETVAL</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$UserName</span>&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token operator">!</span> <span class="token function">id</span> <span class="token variable">$UserName</span> <span class="token operator">&amp;&gt;</span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">useradd</span> <span class="token variable">$UserName</span>
    <span class="token assign-left variable">Pass</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span>dialog <span class="token parameter variable">--colors</span> --ok-label <span class="token string">&quot;Submit&quot;</span> --no-shadow <span class="token parameter variable">--nocancel</span> <span class="token parameter variable">--stdout</span> <span class="token parameter variable">--backtitle</span> <span class="token string">&quot;Password for <span class="token variable">$UserName</span>&quot;</span> <span class="token parameter variable">--title</span> <span class="token string">&quot;Password&quot;</span>  <span class="token parameter variable">--insecure</span> <span class="token parameter variable">--passwordbox</span> <span class="token string">&quot;Please enter the password for \\Z1<span class="token variable">$UserName</span>\\Zn: &quot;</span> <span class="token number">10</span> <span class="token number">30</span><span class="token variable">\`</span></span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$Pass</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> <span class="token variable">$UserName</span> <span class="token operator">&amp;&gt;</span> /dev/null
    dialog <span class="token parameter variable">--clear</span> <span class="token parameter variable">--backtitle</span> <span class="token string">&quot;Add a user.&quot;</span> <span class="token parameter variable">--title</span> <span class="token string">&quot;Add a user.&quot;</span> <span class="token parameter variable">--msgbox</span> <span class="token string">&quot;Add user <span class="token variable">$UserName</span> finished.&quot;</span> <span class="token number">10</span> <span class="token number">30</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$UserName</span> is already there.&quot;</span>
  <span class="token keyword">fi</span>
<span class="token keyword">fi</span>


<span class="token comment"># \u6279\u91CF\u6DFB\u52A0\u7528\u6237</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">I</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token function">useradd</span> user<span class="token variable">$I</span><span class="token punctuation">;</span>
  <span class="token builtin class-name">echo</span> user<span class="token variable">$I</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> user<span class="token variable">$I</span>
<span class="token keyword">done</span>


<span class="token keyword">while</span> <span class="token builtin class-name">read</span> line<span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable"><span class="token variable">\`</span><span class="token builtin class-name">echo</span> $line <span class="token operator">|</span> <span class="token function">cut</span> -d: <span class="token parameter variable">-f7</span><span class="token variable">\`</span></span> <span class="token operator">==</span> <span class="token string">&quot;/bin/bash&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$line</span> <span class="token operator">|</span> <span class="token function">cut</span> -d: <span class="token parameter variable">-f1</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> /etc/passwd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">\u6062\u590D\u5BC6\u7801</p><p>\u5373\u8FDB\u5165\u5355\u7528\u6237\u6A21\u5F0F: \u5728linux\u51FA\u73B0grub\u540E\uFF0C\u5728\u5B89\u88C5\u7684\u7CFB\u7EDF\u4E0A\u9762\u6309&quot;e&quot;\uFF0C\u7136\u540E\u51FA\u73B0grub\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u6309\u952E\u76D8\u79FB\u52A8\u5149\u6807\u5230\u7B2C\u4E8C\u884C&quot;Ker\u2026\u2026&quot;\uFF0C\u518D\u6309&quot;e&quot;\uFF0C\u7136\u540E\u5728\u8FD9\u4E00\u884C\u7684\u7ED3\u5C3E\u52A0\u4E0A\uFF1A\u7A7A\u683C single\u6216\u8005\u7A7A\u683C1\u56DE\u8F66\uFF0C\u7136\u540E\u6309&quot;b&quot;\u91CD\u542F\uFF0C\u5C31\u8FDB\u5165\u4E86&quot;\u5355\u7528\u6237\u6A21\u5F0F&quot;</p></div><div class="custom-container tip"><p class="custom-container-title">\u7279\u6B8A\u6743\u9650</p><p>s\u6216 S \uFF08SUID\uFF09\uFF1A\u5BF9\u5E94\u6570\u503C4<br> s\u6216 S \uFF08SGID\uFF09\uFF1A\u5BF9\u5E94\u6570\u503C2<br> t\u6216 T \uFF1A\u5BF9\u5E94\u6570\u503C1<br> \u5927S\uFF1A\u4EE3\u8868\u62E5\u6709root\u6743\u9650\uFF0C\u4F46\u662F\u6CA1\u6709\u6267\u884C\u6743\u9650<br> \u5C0Fs\uFF1A\u62E5\u6709\u7279\u6743\u4E14\u62E5\u6709\u6267\u884C\u6743\u9650\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u53EF\u4EE5\u8BBF\u95EE\u7CFB\u7EDF\u4EFB\u4F55root\u7528\u6237\u53EF\u4EE5\u8BBF\u95EE\u7684\u8D44\u6E90<br> T\u6216T\uFF08Sticky\uFF09\uFF1A/tmp\u548C /var/tmp\u76EE\u5F55\u4F9B\u6240\u6709\u7528\u6237\u6682\u65F6\u5B58\u53D6\u6587\u4EF6\uFF0C\u4EA6\u5373\u6BCF\u4F4D\u7528\u6237\u7686\u62E5\u6709\u5B8C\u6574\u7684\u6743\u9650\u8FDB\u5165\u8BE5\u76EE\u5F55\uFF0C\u53BB\u6D4F\u89C8\u3001\u5220\u9664\u548C\u79FB\u52A8\u6587\u4EF6</p></div>`,6),t=[l];function o(i,c){return n(),a("div",null,t)}const u=s(p,[["render",o],["__file","linux-user.html.vue"]]);export{u as default};
